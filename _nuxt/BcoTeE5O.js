var se=Object.defineProperty;var ie=(n,t,e)=>t in n?se(n,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[t]=e;var Ht=(n,t,e)=>ie(n,typeof t!="symbol"?t+"":t,e);import{I as Ct,k as j,d as It,r as at,o as Mt,J as jt,x as G,y as L,z as g,B as H,C as ut,K as lt,A as _,L as v,T as ft,M as S,N as Rt,D as J,_ as Wt,O as N,a as oe,P as ae,Q as At,R as ne,G as re,S as dt,U as Xt,V as Vt,s as z,W as le,X as Yt,Y as ce,Z as he,$ as yt,a0 as mt,a1 as de,a2 as ue,a3 as fe,a4 as pe,a5 as ge,a6 as xe,a7 as ve}from"./BHoxVMYH.js";import qt from"./Bv2r_OA8.js";const M={POINT_COUNT:60,MAX_METEORS:20,GRAVITY_RADIUS_BASE:700,START_RADIUS:20,CRITICAL_MASS:300,MASS_GAIN_METEOR:2,MASS_GAIN_SHIP:10,BOMB_DAMAGE:6,SHIP_COUNT:4,SHIP_SPEED:4,SHIP_TURN_SPEED:.12,SHIP_SEPARATION:80,SHIP_ENGAGEMENT_DIST:600,POWERUP_RATE:.015,POWERUP_DURATION:600,SIZE_MODIFIER_BIG:1.8,SIZE_MODIFIER_SMALL:.6,COLORS:{primary:"#8b5cf6",secondary:"#06b6d4",danger:"#f43f5e",repel:"#f59e0b",shipEngines:"#facc15",white:"#ffffff",bg:"#0a0a0a",bomb:"#ef4444",buff:"#10b981",debuff:"#a855f7",shield:"#3b82f6"}},U={ROAM:"ROAM",DOGFIGHT:"DOGFIGHT",PANIC:"PANIC"},W={SERPENT:"SERPENT",SHIP:"SHIP",POINT:"POINT",POWERUP:"POWERUP"},rt={CHARGE:"CHARGE",FLANK:"FLANK",RETREAT:"RETREAT"};var D=(n=>(n[n.STABLE=0]="STABLE",n[n.UNSTABLE=1]="UNSTABLE",n[n.EXPLODING=2]="EXPLODING",n[n.REFORMING=3]="REFORMING",n))(D||{});class d{static dist(t,e){const s=t.x-e.x,i=t.y-e.y;return Math.sqrt(s*s+i*i)}static angle(t,e){return Math.atan2(e.y-t.y,e.x-t.x)}static randomRange(t,e){return Math.random()*(e-t)+t}static randomChoice(t){if(t.length===0)throw new Error("Array is empty");return t[Math.floor(Math.random()*t.length)]}static normalizeAngle(t){let e=t;for(;e<-Math.PI;)e+=Math.PI*2;for(;e>Math.PI;)e-=Math.PI*2;return e}static randomColor(){const t=Math.floor(Math.random()*360),e=Math.floor(Math.random()*30)+70,s=Math.floor(Math.random()*40)+40;return`hsl(${t}, ${e}%, ${s}%)`}}class V{x;y;vx=0;vy=0;color;markedForDeletion=!1;constructor(t,e,s){this.x=t,this.y=e,this.color=s}applyPhysics(t=1,e=1){this.x+=this.vx*t,this.y+=this.vy*t,this.vx*=e,this.vy*=e}}class q{static checkCircleCollision(t,e,s,i){return d.dist(t,e)<s+i}static checkPointInCircle(t,e,s){return d.dist(t,e)<s}static checkSegmentCollision(t,e,s,i){for(const a of e)if(this.checkCircleCollision(t,a,i,s))return!0;return!1}static checkShipCollision(t,e,s,i){const a=s*(e.sizeMult||1);return this.checkCircleCollision(t,e,i,a)}}class Tt extends V{damage;size;life;maxLife;constructor(t,e,s,i,a,r,o,l){super(t,e,a),this.vx=s,this.vy=i,this.damage=r,this.size=o,this.life=l,this.maxLife=l}checkCollisions(t){if(t.bigMeteor&&q.checkCircleCollision(this,t.bigMeteor,this.size,t.bigMeteor.size)){this.onHitBigMeteor(t,t.bigMeteor);return}for(const e of t.ships)if(e.color!==this.color&&q.checkShipCollision(this,e,12,this.size)){this.onHitShip(t,e);return}for(const e of t.serpents)if(e.segments.length>0){const s=20*(e.sizeMult||1);if(q.checkCircleCollision(this,e.segments[0],this.size,s)){this.onHitSerpent(t,e);return}}}onHitBigMeteor(t,e){e.hp-=.1,t.createExplosion(this.x,this.y,8,this.color),this.markedForDeletion=!0}onHitShip(t,e){e.takeDamage(t,this.damage),this.createHitEffect(t),this.markedForDeletion=!0}onHitSerpent(t,e){e.takeDamage(t,this.damage),this.createHitEffect(t),this.markedForDeletion=!0}createHitEffect(t){t.createExplosion(this.x,this.y,5,this.color)}update(t){if(this.life--,this.life<=0){this.markedForDeletion=!0;return}this.applyPhysics(t.warpFactor),this.checkCollisions(t)}}class ${getIcon(){return this.icon}}class ye extends ${type="HEAL";duration=0;icon="‚ù§Ô∏è";weight=7;isGood=!0;apply(t){if(t.hp!==void 0&&t.maxHp!==void 0){const e=t instanceof wt?10:2;t.hp=Math.min(t.hp+e,t.maxHp)}}}class me extends ${type="SPEED_BOOST";duration=M.POWERUP_DURATION;icon="‚ö°";weight=8;isGood=!0;apply(t){const e=t.activeEffects.find(s=>s.type===this.type);e?e.timer=this.duration:(t.activeEffects.push({type:this.type,timer:this.duration}),t.statusIcons.includes(this.icon)||t.statusIcons.push(this.icon))}updateEffect(t,e){t.speedMult!==void 0&&(t.speedMult=1.8)}removeEffect(t){const e=t.statusIcons.indexOf(this.icon);e>-1&&t.statusIcons.splice(e,1)}}class be extends ${type="DAMAGE_BOOST";duration=M.POWERUP_DURATION;icon="‚öîÔ∏è";weight=7;isGood=!0;apply(t){const e=t.activeEffects.find(s=>s.type===this.type);e?e.timer=this.duration:(t.activeEffects.push({type:this.type,timer:this.duration}),t.statusIcons.includes(this.icon)||t.statusIcons.push(this.icon))}updateEffect(t,e){if(t.damageMult!==void 0){const s="segments"in t;t.damageMult=s?2:3}}removeEffect(t){const e=t.statusIcons.indexOf(this.icon);e>-1&&t.statusIcons.splice(e,1)}}class we extends ${type="RAPID_FIRE";duration=M.POWERUP_DURATION;icon="üî•";weight=0;isGood=!0;apply(t){const e=t.activeEffects.find(s=>s.type===this.type);e?e.timer=this.duration:(t.activeEffects.push({type:this.type,timer:this.duration}),t.statusIcons.includes(this.icon)||t.statusIcons.push(this.icon))}updateEffect(t,e){t.reloadMult!==void 0&&(t.reloadMult=4)}removeEffect(t){const e=t.statusIcons.indexOf(this.icon);e>-1&&t.statusIcons.splice(e,1)}}class Me extends ${type="SLOW_DOWN";duration=M.POWERUP_DURATION;icon="‚ùÑÔ∏è";weight=6;isGood=!1;apply(t){const e=t.activeEffects.find(s=>s.type===this.type);e?e.timer=this.duration:(t.activeEffects.push({type:this.type,timer:this.duration}),t.statusIcons.includes(this.icon)||t.statusIcons.push(this.icon))}updateEffect(t,e){t.speedMult!==void 0&&(t.speedMult=.5)}removeEffect(t){const e=t.statusIcons.indexOf(this.icon);e>-1&&t.statusIcons.splice(e,1)}}class Te extends ${type="WEAPON_JAM";duration=M.POWERUP_DURATION;icon="üö´";weight=2;isGood=!1;apply(t){const e=t.activeEffects.find(s=>s.type===this.type);e?e.timer=this.duration:(t.activeEffects.push({type:this.type,timer:this.duration}),t.statusIcons.includes(this.icon)||t.statusIcons.push(this.icon))}updateEffect(t,e){t.isJammed!==void 0&&(t.isJammed=!0)}removeEffect(t){const e=t.statusIcons.indexOf(this.icon);e>-1&&t.statusIcons.splice(e,1)}}class Se extends ${type="SIZE_UP";duration=600;icon="‚ûï";weight=5;isGood=!0;apply(t){const e=t.activeEffects.find(s=>s.type===this.type);e?e.timer=this.duration:(t.activeEffects.push({type:this.type,timer:this.duration}),t.statusIcons.includes(this.icon)||t.statusIcons.push(this.icon))}updateEffect(t,e){t.sizeMult!==void 0&&(t.sizeMult=M.SIZE_MODIFIER_BIG)}removeEffect(t){const e=t.statusIcons.indexOf(this.icon);e>-1&&t.statusIcons.splice(e,1),t.sizeMult!==void 0&&(t.sizeMult=1)}}class Ee extends ${type="SIZE_DOWN";duration=600;icon="‚ûñ";weight=5;isGood=!0;apply(t){const e=t.activeEffects.find(s=>s.type===this.type);e?e.timer=this.duration:(t.activeEffects.push({type:this.type,timer:this.duration}),t.statusIcons.includes(this.icon)||t.statusIcons.push(this.icon))}updateEffect(t,e){t.sizeMult!==void 0&&(t.sizeMult=M.SIZE_MODIFIER_SMALL)}removeEffect(t){const e=t.statusIcons.indexOf(this.icon);e>-1&&t.statusIcons.splice(e,1),t.sizeMult!==void 0&&(t.sizeMult=1)}}class Re extends ${type="GET_SHIELD";duration=0;icon="üõ°Ô∏è";weight=5;isGood=!0;apply(t){t.shield!==void 0&&t.maxShield!==void 0&&(t.shield=t.maxShield)}}class ke extends ${type="GET_TELEPORT";duration=0;icon="üåÄ";weight=5;isGood=!0;apply(t){t.hasTeleport!==void 0&&(t.hasTeleport=!0)}tryTeleport(t,e){if(!t.hasTeleport||t.state!==U.DOGFIGHT||!t.navTarget)return!1;if(d.dist(t,t.navTarget)>400){const i=d.angle(t,t.navTarget);return t.x=t.navTarget.x-Math.cos(i)*100,t.y=t.navTarget.y-Math.sin(i)*100,e.createExplosion(t.x,t.y,20,M.COLORS.shield),t.hasTeleport=!1,!0}return!1}}function Y(n,t){n.shadowColor=t.color,n.shadowBlur=t.blur*t.intensity,t.spread!==void 0&&(n.shadowOffsetX=0,n.shadowOffsetY=0)}function Pe(n,t,e=1){return n*(.7+.3*Math.sin(t*e))}class pt{static calculateGravityPull(t,e){if(e.state===D.EXPLODING)return null;const s=d.dist(t,e),i=d.angle(t,e),a=.1+e.mass/M.CRITICAL_MASS*.9,r=M.GRAVITY_RADIUS_BASE*(.5+a*.5);if(s<r){const o=.3*a*(1-s/r);return{vx:Math.cos(i)*o,vy:Math.sin(i)*o}}return null}static shouldDieFromGravity(t,e){return e.state===D.EXPLODING?!1:d.dist(t,e)<e.visualRadius}static shouldDieFromShockwave(t,e){return e.state!==D.EXPLODING?!1:d.dist(t,e)<e.shockwaveRadius+50}}class De extends Tt{constructor(t,e,s,i,a){super(t,e,s,i,M.COLORS.bomb,a,4,300)}update(t){const e=t.blackHole;if(e.state!==D.EXPLODING){const i=pt.calculateGravityPull(this,e);i&&(this.vx+=i.vx*2.67,this.vy+=i.vy*2.67)}if(this.x+=this.vx*t.warpFactor,this.y+=this.vy*t.warpFactor,this.life--,d.dist(this,e)<e.visualRadius&&e.state!==D.EXPLODING){t.createExplosion(this.x,this.y,30,this.color),e.mass=Math.max(0,e.mass-this.damage),e.shake=10,t.spawnShockwave(this.x,this.y),this.markedForDeletion=!0;return}if(t.bigMeteor&&q.checkCircleCollision(this,t.bigMeteor,4,t.bigMeteor.size)){t.bigMeteor.hp-=1,t.createExplosion(this.x,this.y,25,this.color),this.markedForDeletion=!0;return}for(const i of t.serpents)if(q.checkSegmentCollision(this,i.segments,30,0)){i.takeDamage(t,100),t.createExplosion(this.x,this.y,40,this.color),t.spawnShockwave(this.x,this.y),this.markedForDeletion=!0;return}this.life<=0&&(this.markedForDeletion=!0)}drawSpecific(t){t.save(),Y(t,{color:this.color,intensity:1,blur:25}),t.beginPath(),t.arc(0,0,4,0,Math.PI*2),t.fillStyle=this.color,t.fill(),t.restore()}}class _e extends ${type="UPGRADE_BOMB";duration=0;icon="üí£";weight=5;isGood=!0;apply(t){t.bombLevel!==void 0&&(t.bombLevel=2)}tryFireBomb(t,e){if(t.bombLevel===void 0||t.bombLevel<1||t.bombCooldown>0)return!1;const s=e.blackHole,i=d.angle(t,s),a=Math.abs(d.normalizeAngle(i-t.angle)),r=d.dist(t,s);return a<.5&&r<500&&s.state!==D.EXPLODING?(t.bombLevel===2?M.BOMB_DAMAGE*2:M.BOMB_DAMAGE,e.spawnBomb(t.x,t.y,t.vx,t.vy,t.angle,t.bombLevel),t.bombCooldown=400,!0):!1}}class Ce extends ${type="UPGRADE_RANGE";duration=0;icon="üî≠";weight=5;isGood=!0;apply(t){t.rangeMult!==void 0&&(t.rangeMult=1.5)}}class K{cooldownTimer=0;cachedVisual=null;update(){this.cooldownTimer>0&&this.cooldownTimer--}get isReady(){return this.cooldownTimer<=0}fire(t,e,s,i,a){return this.isReady?(this.spawnProjectiles(t,e,s,i),this.cooldownTimer=this.config.cooldown/a,!0):!1}getVisual(t,e){return this.cachedVisual||(this.cachedVisual=this.generateVisual(t,e)),this.cachedVisual}getAllowedAngle(){return .5}getRange(t){return t+100}}class nt extends Tt{drawSpecific(t){const e=Math.atan2(this.vy,this.vx);t.rotate(e);const s=this.size>3?30:10;t.save(),Y(t,{color:this.color,intensity:1,blur:15+this.size*5}),t.beginPath(),t.moveTo(0,0),t.lineTo(-s,0),t.strokeStyle=this.color,t.lineWidth=this.size,t.stroke(),t.restore()}}class Ie{cache=new Map;maxSize=100;createCanvas(t,e){const s=document.createElement("canvas");return s.width=t,s.height=e,s}get(t){return this.cache.get(t)}set(t,e){if(this.cache.size>=this.maxSize){const s=this.cache.keys().next().value;s&&this.cache.delete(s)}this.cache.set(t,e)}has(t){return this.cache.has(t)}clear(){this.cache.clear()}generateKey(t,e){const s=Object.entries(e).sort(([i],[a])=>i.localeCompare(a)).map(([i,a])=>`${i}:${a}`).join("|");return`${t}:${s}`}}const Z=new Ie;class Ae extends K{config={cooldown:5,damage:.3,speed:14,spread:.3,color:"#f59e0b",size:1.5};icon="‚à¥";duration=400;getAllowedAngle(){return .8}spawnProjectiles(t,e,s,i){const a=(Math.random()-.5)*this.config.spread,r=e.vx+Math.cos(s+a)*this.config.speed,o=e.vy+Math.sin(s+a)*this.config.speed;t.projectiles.push(new nt(e.x,e.y,r,o,this.config.color,this.config.damage*i,this.config.size,50))}generateVisual(t,e){const s=Z.createCanvas(t,e),i=s.getContext("2d");i.save(),i.strokeStyle="#f59e0b",i.shadowColor="#f59e0b",i.shadowBlur=20,i.lineWidth=1.5;for(let a=0;a<3;a++)i.beginPath(),i.moveTo(t/2,e/2),i.lineTo(t/2-15-a*2,e/2+(Math.random()-.5)*4),i.stroke();return i.restore(),{canvas:s,width:t,height:e,key:"minigun"}}}class Oe extends K{config={cooldown:60,damage:.8,speed:10,spread:.4,color:"#ef4444",size:2,count:5};icon="‚ãó";duration=500;spawnProjectiles(t,e,s,i){const a=this.config.count||5;for(let r=0;r<a;r++){const o=(Math.random()-.5)*this.config.spread,l=e.vx+Math.cos(s+o)*this.config.speed,h=e.vy+Math.sin(s+o)*this.config.speed;t.projectiles.push(new nt(e.x,e.y,l,h,this.config.color,this.config.damage*i,this.config.size,40))}}generateVisual(t,e){const s=Z.createCanvas(t,e),i=s.getContext("2d");i.save(),i.strokeStyle="#ef4444",i.shadowColor="#ef4444",i.shadowBlur=18,i.lineWidth=2;const a=t/2,r=e/2;for(let o=0;o<5;o++){const l=-.4+o*.2;i.beginPath(),i.moveTo(a,r),i.lineTo(a+Math.cos(l)*18,r+Math.sin(l)*18),i.stroke()}return i.restore(),{canvas:s,width:t,height:e,key:"shotgun"}}}class Le extends K{config={cooldown:100,damage:10,speed:40,spread:0,color:"#06b6d4",size:4};icon="‚îÅ";duration=800;spawnProjectiles(t,e,s,i){const a=e.vx+Math.cos(s)*this.config.speed,r=e.vy+Math.sin(s)*this.config.speed;t.projectiles.push(new nt(e.x,e.y,a,r,this.config.color,this.config.damage*i,this.config.size,30))}generateVisual(t,e){const s=Z.createCanvas(t,e),i=s.getContext("2d");return i.save(),i.strokeStyle="#06b6d4",i.shadowColor="#06b6d4",i.shadowBlur=25,i.lineWidth=4,i.beginPath(),i.moveTo(t/2,e/2),i.lineTo(t/2-30,e/2),i.stroke(),i.restore(),{canvas:s,width:t,height:e,key:"railgun"}}}class Be extends K{config={cooldown:120,damage:4,speed:5,spread:.2,color:"#ec4899",size:3};icon="üöÄ";duration=700;getRange(t){return 1e3}spawnProjectiles(t,e,s,i){const a=(Math.random()-.5)*this.config.spread,r=e.vx+Math.cos(s+a)*this.config.speed,o=e.vy+Math.sin(s+a)*this.config.speed;t.projectiles.push(new Zt(e.x,e.y,r,o,this.config.color,this.config.damage*i))}generateVisual(t,e){const s=Z.createCanvas(t,e),i=s.getContext("2d");i.save();const a=t/2,r=e/2;return i.fillStyle="#ec4899",i.shadowColor="#ec4899",i.shadowBlur=20,i.beginPath(),i.moveTo(a+6,r),i.lineTo(a-4,r+4),i.lineTo(a-4,r-4),i.fill(),i.strokeStyle="#f59e0b",i.shadowColor="#f59e0b",i.shadowBlur=15,i.lineWidth=2,i.beginPath(),i.moveTo(a-4,r),i.lineTo(a-10,r),i.stroke(),i.restore(),{canvas:s,width:t,height:e,key:"missile"}}}class Ot extends Tt{pattern;initialV;spawnTime;constructor(t,e,s,i,a,r,o,l){super(t,e,s,i,a,r,o,60),this.pattern=l,this.initialV={x:s,y:i},this.spawnTime=Date.now(),l==="PLASMA"&&(this.life=100)}update(t){if(this.pattern==="WAVE"){const e=(Date.now()-this.spawnTime)*.015,s=-this.initialV.y,i=this.initialV.x,a=Math.sqrt(s*s+i*i)||1,r=Math.sin(e)*4;this.x+=s/a*r*.2,this.y+=i/a*r*.2}else if(this.pattern==="FLAK"&&this.life<10){for(let e=0;e<6;e++){const s=Math.random()*Math.PI*2,i=6;t.projectiles.push(new nt(this.x,this.y,Math.cos(s)*i,Math.sin(s)*i,this.color,1,1.5,20))}this.markedForDeletion=!0;return}super.update(t)}onHitShip(t,e){e.takeDamage(t,this.damage),this.pattern!=="PLASMA"?this.markedForDeletion=!0:t.createExplosion(this.x,this.y,2,this.color)}onHitSerpent(t,e){e.takeDamage(t,this.damage),this.pattern!=="PLASMA"&&(this.markedForDeletion=!0)}drawSpecific(t){if(t.save(),this.pattern==="PLASMA"){const e=Math.sin(Date.now()*.02)*2,s=Pe(1,Date.now()*.01,2);Y(t,{color:this.color,intensity:s,blur:30}),t.beginPath(),t.arc(0,0,this.size+e,0,Math.PI*2),t.fillStyle=this.color,t.fill()}else this.pattern==="FLAK"?(Y(t,{color:this.color,intensity:1,blur:20}),t.beginPath(),t.arc(0,0,this.size,0,Math.PI*2),t.fillStyle=this.color,t.fill()):(Y(t,{color:this.color,intensity:.8,blur:15}),t.beginPath(),t.arc(0,0,this.size,0,Math.PI*2),t.fillStyle=this.color,t.fill());t.restore()}}class Ge extends K{config={cooldown:150,damage:.5,speed:3,spread:0,color:"#8b5cf6",size:8};icon="üü£";duration=900;spawnProjectiles(t,e,s,i){const a=e.vx+Math.cos(s)*this.config.speed,r=e.vy+Math.sin(s)*this.config.speed;t.projectiles.push(new Ot(e.x,e.y,a,r,this.config.color,this.config.damage*i,this.config.size,"PLASMA"))}generateVisual(t,e){const s=Z.createCanvas(t,e),i=s.getContext("2d");i.save();const a=t/2,r=e/2,o=8,l=i.createRadialGradient(a,r,0,a,r,o);return l.addColorStop(0,"#ffffff"),l.addColorStop(.5,"#8b5cf6"),l.addColorStop(1,"transparent"),i.fillStyle=l,i.shadowColor="#8b5cf6",i.shadowBlur=30,i.beginPath(),i.arc(a,r,o,0,Math.PI*2),i.fill(),i.restore(),{canvas:s,width:t,height:e,key:"plasma"}}}class He extends K{config={cooldown:90,damage:2,speed:9,spread:.1,color:"#64748b",size:3};icon="üí•";duration=550;spawnProjectiles(t,e,s,i){const a=(Math.random()-.5)*this.config.spread,r=e.vx+Math.cos(s+a)*this.config.speed,o=e.vy+Math.sin(s+a)*this.config.speed;t.projectiles.push(new Ot(e.x,e.y,r,o,this.config.color,this.config.damage*i,this.config.size,"FLAK"))}generateVisual(t,e){const s=Z.createCanvas(t,e),i=s.getContext("2d");i.save();const a=t/2,r=e/2;i.fillStyle="#64748b",i.shadowColor="#64748b",i.shadowBlur=22,i.beginPath(),i.arc(a,r,3,0,Math.PI*2),i.fill();for(let o=0;o<6;o++){const l=Math.PI*2*o/6;i.beginPath(),i.moveTo(a,r),i.lineTo(a+Math.cos(l)*5,r+Math.sin(l)*5),i.stroke()}return i.restore(),{canvas:s,width:t,height:e,key:"flak"}}}class Ne extends K{config={cooldown:25,damage:1.5,speed:7,spread:0,color:"#14b8a6",size:2};icon="„Ä∞Ô∏è";duration=450;spawnProjectiles(t,e,s,i){const a=e.vx+Math.cos(s)*this.config.speed,r=e.vy+Math.sin(s)*this.config.speed;t.projectiles.push(new Ot(e.x,e.y,a,r,this.config.color,this.config.damage*i,this.config.size,"WAVE"))}generateVisual(t,e){const s=Z.createCanvas(t,e),i=s.getContext("2d");i.save(),i.strokeStyle="#14b8a6",i.shadowColor="#14b8a6",i.shadowBlur=18,i.lineWidth=2,i.beginPath();const a=t/2,r=e/2;for(let o=0;o<20;o++){const l=r+Math.sin(o*.5)*3;o===0?i.moveTo(a+o,l):i.lineTo(a+o,l)}return i.stroke(),i.restore(),{canvas:s,width:t,height:e,key:"wave"}}}class ze extends K{config={cooldown:180,damage:15,speed:60,spread:0,color:"#ffffff",size:2};icon="üéØ";duration=1e3;getRange(t){return 1e3}spawnProjectiles(t,e,s,i){const a=e.vx+Math.cos(s)*this.config.speed,r=e.vy+Math.sin(s)*this.config.speed;t.projectiles.push(new nt(e.x,e.y,a,r,this.config.color,this.config.damage*i,this.config.size,30))}generateVisual(t,e){const s=Z.createCanvas(t,e),i=s.getContext("2d");return i.save(),i.strokeStyle="#ffffff",i.shadowColor="#ffffff",i.shadowBlur=30,i.lineWidth=2,i.beginPath(),i.moveTo(t/2,e/2),i.lineTo(t/2-40,e/2),i.stroke(),i.beginPath(),i.arc(t/2-20,e/2,2,0,Math.PI*2),i.fill(),i.restore(),{canvas:s,width:t,height:e,key:"sniper"}}}class Q extends ${type;icon;weight;isGood=!0;weaponClass;constructor(t,e,s,i){super(),this.type=t,this.weaponClass=e,this.icon=s,this.weight=i}get duration(){return new this.weaponClass().duration}apply(t){if(t.weapon!==void 0&&t.weaponTimer!==void 0){const e=new this.weaponClass;t.weapon=e,t.weaponTimer=this.duration}}}const x=Ct({coins:0,darkMatter:0,shipsCount:4,damageLevel:1,hullLevel:1,turretSpeed:1,shieldLevel:0,critLevel:0,regenLevel:0,magnetLevel:1,blackHoleSerpentCostDebuff:0,blackHoleBalanceRateDebuff:0,blackHoleDarkMatterRateDebuff:0}),I=j(()=>{const n=(t,e,s)=>Math.floor(t*Math.pow(e,s));return{ship:n(1e3,2.2,x.shipsCount-4),damage:n(250,1.4,x.damageLevel-1),turret:n(300,1.45,x.turretSpeed-1),hull:n(200,1.35,x.hullLevel-1),shield:n(400,1.4,x.shieldLevel),crit:n(500,1.6,x.critLevel),regen:n(600,1.6,x.regenLevel),magnet:n(300,1.5,x.magnetLevel-1),blackHoleSerpentCost:n(400,1.5,x.blackHoleSerpentCostDebuff),blackHoleBalanceRate:n(500,1.6,x.blackHoleBalanceRateDebuff),blackHoleDarkMatterRate:n(600,1.7,x.blackHoleDarkMatterRateDebuff)}}),O=n=>{const t=I.value[n];x.coins>=t&&(x.coins-=t,n==="ship"?(x.shipsCount++,M.SHIP_COUNT=x.shipsCount):n==="damage"?x.damageLevel++:n==="hull"?x.hullLevel++:n==="turret"?x.turretSpeed++:n==="shield"?x.shieldLevel++:n==="crit"?x.critLevel++:n==="regen"?x.regenLevel++:n==="magnet"?x.magnetLevel++:n==="blackHoleSerpentCost"?x.blackHoleSerpentCostDebuff++:n==="blackHoleBalanceRate"?x.blackHoleBalanceRateDebuff++:n==="blackHoleDarkMatterRate"&&x.blackHoleDarkMatterRateDebuff++)};class $e extends ${type="COIN";duration=0;icon="üí∞";weight=3;isGood=!0;apply(t){t instanceof Ship?x.coins+=500:t instanceof VoidSerpent}}const C=class C{static create(t){return this.upgrades.get(t)||null}static apply(t,e){const s=this.create(t);s&&s.apply(e)}};Ht(C,"upgrades",new Map),C.upgrades.set("HEAL",new ye),C.upgrades.set("SPEED_BOOST",new me),C.upgrades.set("DAMAGE_BOOST",new be),C.upgrades.set("RAPID_FIRE",new we),C.upgrades.set("SLOW_DOWN",new Me),C.upgrades.set("WEAPON_JAM",new Te),C.upgrades.set("SIZE_UP",new Se),C.upgrades.set("SIZE_DOWN",new Ee),C.upgrades.set("GET_SHIELD",new Re),C.upgrades.set("GET_TELEPORT",new ke),C.upgrades.set("UPGRADE_BOMB",new _e),C.upgrades.set("UPGRADE_RANGE",new Ce),C.upgrades.set("COIN",new $e),C.upgrades.set("GET_MINIGUN",new Q("GET_MINIGUN",Ae,"‚à¥",5)),C.upgrades.set("GET_SHOTGUN",new Q("GET_SHOTGUN",Oe,"‚ãó",5)),C.upgrades.set("GET_RAILGUN",new Q("GET_RAILGUN",Le,"‚îÅ",4)),C.upgrades.set("GET_MISSILE",new Q("GET_MISSILE",Be,"üöÄ",4)),C.upgrades.set("GET_PLASMA",new Q("GET_PLASMA",Ge,"üü£",4)),C.upgrades.set("GET_FLAK",new Q("GET_FLAK",He,"üí•",4)),C.upgrades.set("GET_WAVE",new Q("GET_WAVE",Ne,"„Ä∞Ô∏è",3)),C.upgrades.set("GET_SNIPER",new Q("GET_SNIPER",ze,"üéØ",3));let X=C;class Jt extends V{text;life=1;size=20;constructor(t,e,s,i){super(t,e,i),this.text=s,this.vy=-1.5,this.vx=d.randomRange(-.5,.5)}update(t){this.x+=this.vx,this.y+=this.vy,this.life-=.02,this.life<=0&&(this.markedForDeletion=!0)}draw(t){t.save(),t.globalAlpha=this.life,t.fillStyle=this.color,t.font=`bold ${this.size}px monospace`,t.textAlign="center",t.shadowColor="#000",t.shadowBlur=4,t.fillText(this.text,this.x,this.y),t.restore()}}class it extends Jt{constructor(t,e,s){const i=`+${Math.floor(s)}$`,a="#fbbf24",r=18,o=d.randomRange(-10,10),l=d.randomRange(-10,10);super(t+o,e+l,i,a),this.size=r,this.vy=-1.2,this.vx=d.randomRange(-.3,.3)}static create(t,e,s){return new it(t,e,s)}}let wt=class extends V{life=1;angle;speed;segments=[];wobbleOffset=Math.random()*100;hp=30;maxHp=30;activeEffects=[];statusIcons=[];sizeMult=1;navTarget=null;targetType=null;damageMult=1;speedMult=1;constructor(t,e){const s=d.randomRange(250,300);super(t,e,`hsla(${s}, 100%, 70%, 1)`),this.angle=Math.random()*Math.PI*2,this.speed=d.randomRange(1.5,2.5),this.segments.push({x:t,y:e})}applyPowerUp(t,e){if(t.type==="COIN"&&e){x.darkMatter+=500;return}if(t.type.startsWith("GET_")&&t.type!=="GET_SHIELD"&&t.type!=="GET_TELEPORT"){X.apply("DAMAGE_BOOST",this);return}X.apply(t.type,this)}get bounty(){let t=50;return this.sizeMult>1.2&&(t*=2),this.activeEffects.length>0&&(t+=25*this.activeEffects.length),Math.floor(t)}takeDamage(t,e=1){const s=this.sizeMult>1.5?e*.7:e;if(this.hp-=s,t.spawnDamageText(this.x,this.y,s,s>5),t.createExplosion(this.x,this.y,5,this.color),this.hp<=0){t.createExplosion(this.x,this.y,60,"#ffffff");const i=this.bounty;t.addCoins(i,this.x,this.y),t.addDarkMatter(i,this.x,this.y),this.markedForDeletion=!0}}findTarget(t){let e=1/0,s=null,i=null;for(const a of t.powerUps){if(!a.isGood)continue;const r=d.dist(this,a);r<e&&r<400&&(e=r,s=a,i=W.POWERUP)}for(const a of t.ships){const r=d.dist(this,a);r<e&&r<800&&(e=r,s=a,i=W.SHIP)}return s?(this.navTarget={x:s.x,y:s.y},this.targetType=i,s):(this.navTarget=null,this.targetType=null,null)}update(t){const e=t.blackHole,s=d.dist(this,e);if(pt.shouldDieFromShockwave(this,e)){this.takeDamage(t,9999);return}this.speedMult=1,this.sizeMult=1,this.damageMult=1;for(let h=this.activeEffects.length-1;h>=0;h--){const c=this.activeEffects[h];if(!c){this.activeEffects.splice(h,1);continue}c.timer--;const f=X.create(c.type);f&&f.updateEffect&&f.updateEffect(this,c),c.timer<=0&&(this.activeEffects.splice(h,1),f&&f.removeEffect&&f.removeEffect(this))}const i=this.findTarget(t);if(i){const h=d.angle(this,i);let c=d.normalizeAngle(h-this.angle);if(this.angle+=Math.sign(c)*Math.min(Math.abs(c),.05),this.speed=3*this.speedMult,this.targetType==="SHIP"&&d.dist(this,i)<30*this.sizeMult&&(i.takeDamage(t,2*this.damageMult),this.angle+=Math.PI),this.targetType===W.POWERUP&&d.dist(this,i)<30*this.sizeMult){const f=i;if(f.type==="COIN"){x.darkMatter+=500,t.createExplosion(this.x,this.y,20,"#fbbf24");const p=it.create(this.x,this.y,500);p.text="+500‚ö´",p.color="#8b5cf6",t.floatingTexts.push(p)}else this.applyPowerUp(f,t),t.createExplosion(this.x,this.y,10,f.color);f.markedForDeletion=!0}}else{if(s>400){const h=d.angle(this,e);let c=d.normalizeAngle(h-this.angle);this.angle+=Math.sign(c)*Math.min(Math.abs(c),.02)}this.speed=2*this.speedMult}if(t.bigMeteor){const h=d.dist(this,t.bigMeteor),c=t.bigMeteor.size+150;if(h<c&&h>0){const f=d.angle(t.bigMeteor,this),p=(1-h/c)*1.5,T=Math.cos(f)*p,y=Math.sin(f)*p,E=Math.atan2(Math.sin(this.angle)*this.speed+y,Math.cos(this.angle)*this.speed+T);this.angle=E}}this.x+=Math.cos(this.angle)*this.speed,this.y+=Math.sin(this.angle)*this.speed;const a=Math.sin(Date.now()*.005+this.wobbleOffset)*(3*this.sizeMult),r=this.x+Math.cos(this.angle+Math.PI/2)*a,o=this.y+Math.sin(this.angle+Math.PI/2)*a;this.segments.unshift({x:r,y:o});const l=40*this.sizeMult;this.segments.length>l&&this.segments.pop(),s>900&&(this.life-=.01),this.life<=0&&(this.markedForDeletion=!0)}};class Kt extends V{life=1;size;constructor(t,e,s,i,a,r){super(t,e,s),this.size=i,this.vx=a,this.vy=r}update(){this.x+=this.vx,this.y+=this.vy,this.life-=.02,this.life<=0&&(this.markedForDeletion=!0)}}class Zt extends Tt{target;trail=[];fuel=100;constructor(t,e,s,i,a,r){super(t,e,s,i,a,r,4,200)}update(t){if(!this.target||this.target.markedForDeletion){let e=1/0;for(const s of t.ships){if(s.color===this.color)continue;const i=d.dist(this,s);i<e&&i<800&&(e=i,this.target=s)}if(!this.target)for(const s of t.serpents){const i=d.dist(this,s);i<e&&i<800&&(e=i,this.target=s)}}if(this.target&&this.fuel>0){const e=this.target instanceof wt&&this.target.segments.length>0&&this.target.segments[0]?this.target.segments[0].x:this.target.x,s=this.target instanceof wt&&this.target.segments.length>0&&this.target.segments[0]?this.target.segments[0].y:this.target.y,i=Math.atan2(s-this.y,e-this.x),a=Math.atan2(this.vy,this.vx);let r=d.normalizeAngle(i-a);const o=.08*t.warpFactor,l=a+Math.sign(r)*Math.min(Math.abs(r),o),h=Math.hypot(this.vx,this.vy);this.vx=Math.cos(l)*h*1.02,this.vy=Math.sin(l)*h*1.02;const c=12,f=Math.hypot(this.vx,this.vy);f>c&&(this.vx=this.vx/f*c,this.vy=this.vy/f*c),this.fuel--,Math.random()<.4&&t.particles.push(new Kt(this.x,this.y,"#555",d.randomRange(1,3),0,0))}this.trail.push({x:this.x,y:this.y}),this.trail.length>15&&this.trail.shift(),super.update(t)}createHitEffect(t){t.createExplosion(this.x,this.y,20,"#fbbf24"),t.spawnShockwave(this.x,this.y),this.markedForDeletion=!0}drawSpecific(t){if(t.rotate(-Math.atan2(this.vy,this.vx)),this.trail.length>1&&this.trail[0]){t.save(),t.strokeStyle="#9ca3af",t.shadowColor="#9ca3af",t.shadowBlur=8,t.lineWidth=1,t.beginPath(),t.moveTo(this.trail[0].x-this.x,this.trail[0].y-this.y);for(const e of this.trail)e&&t.lineTo(e.x-this.x,e.y-this.y);t.stroke(),t.restore()}t.rotate(Math.atan2(this.vy,this.vx)),t.save(),t.fillStyle=this.color,t.shadowColor=this.color,t.shadowBlur=20,t.beginPath(),t.moveTo(6,0),t.lineTo(-4,4),t.lineTo(-4,-4),t.fill(),t.restore(),t.save(),t.strokeStyle="#f59e0b",t.shadowColor="#f59e0b",t.shadowBlur=15,t.lineWidth=2,t.beginPath(),t.moveTo(-4,0),t.lineTo(-8,0),t.stroke(),t.restore()}}class Fe{ctx;constructor(t){this.ctx=t}clear(t,e,s,i,a){if(i){if(a<100){this.ctx.fillStyle="#ffffff",this.ctx.fillRect(0,0,t,e);return}this.ctx.fillStyle=M.COLORS.bg,this.ctx.fillRect(0,0,t,e)}else this.ctx.fillStyle=`rgba(10, 10, 10, ${.3+1/s*.7})`,this.ctx.fillRect(0,0,t,e)}drawBlackHole(t){if(t.state===D.EXPLODING){this.ctx.beginPath(),this.ctx.arc(t.x,t.y,t.shockwaveRadius,0,Math.PI*2),this.ctx.strokeStyle="#ffffff",this.ctx.lineWidth=15,this.ctx.globalAlpha=Math.max(0,1-t.shockwaveRadius/2e3),this.ctx.stroke(),this.ctx.globalAlpha=1;return}const e=t.safetyTimer>0?.5:1,s=this.ctx.createRadialGradient(t.x,t.y,t.visualRadius*.8,t.x,t.y,t.visualRadius*2.5),i=t.state===D.UNSTABLE?M.COLORS.danger:M.COLORS.primary;s.addColorStop(0,i),s.addColorStop(1,"rgba(0,0,0,0)"),this.ctx.globalAlpha=e*.6,this.ctx.fillStyle=s,this.ctx.beginPath(),this.ctx.arc(t.x,t.y,t.visualRadius*3,0,Math.PI*2),this.ctx.fill(),this.ctx.globalAlpha=1*e,this.drawAccretionDisk(t),this.drawBlackHoleCore(t)}drawBlackHoleCore(t){if(this.ctx.save(),this.ctx.translate(t.x,t.y),t.shake>0){const a=t.shake*.5;this.ctx.translate(d.randomRange(-a,a),d.randomRange(-a,a))}const e=t.visualRadius,s=t.state===D.UNSTABLE?"#ef4444":"#8b5cf6";this.ctx.beginPath(),this.ctx.arc(0,0,e,0,Math.PI*2),this.ctx.fillStyle="#000000",this.ctx.fill(),this.ctx.beginPath(),this.ctx.arc(0,0,e*.95,0,Math.PI*2),this.ctx.strokeStyle="#ffffff",this.ctx.lineWidth=2,this.ctx.shadowBlur=10,this.ctx.shadowColor=s,this.ctx.stroke(),this.ctx.shadowBlur=0;const i=this.ctx.createRadialGradient(0,0,0,0,0,e*.9);i.addColorStop(0,"#000000"),i.addColorStop(.6,"rgba(0,0,0,0.8)"),i.addColorStop(1,s),this.ctx.globalAlpha=.3,this.ctx.fillStyle=i,this.ctx.fill(),this.ctx.globalAlpha=1,this.ctx.restore()}drawAccretionDisk(t){if(this.ctx.save(),this.ctx.translate(t.x,t.y),t.shake>0){const i=t.shake*.5;this.ctx.translate(d.randomRange(-i,i),d.randomRange(-i,i))}this.ctx.rotate(Date.now()*2e-4);const e=t.upgrades,s=[];for(let i=0;i<e.serpentBaseCost;i++)s.push({type:"serpentBaseCost",color:"#d4a017"});for(let i=0;i<e.serpentHealth;i++)s.push({type:"serpentHealth",color:"#0d8f5e"});for(let i=0;i<e.serpentSpeed;i++)s.push({type:"serpentSpeed",color:"#2d5aa0"});for(let i=0;i<e.serpentDamage;i++)s.push({type:"serpentDamage",color:"#c53030"});for(let i=0;i<e.balanceRate;i++)s.push({type:"balanceRate",color:"#6d28d9"});if(s.length>0){const i=t.visualRadius+25,a=Date.now()*.001,r=3,o=15;for(let l=0;l<r;l++){const h=i+l*o;this.ctx.beginPath(),this.ctx.arc(0,0,h,0,Math.PI*2),this.ctx.strokeStyle="rgba(255, 255, 255, 0.15)",this.ctx.lineWidth=1,this.ctx.stroke()}s.forEach((l,h)=>{const c=Math.PI*2*h/s.length+a*.3,f=i+h%r*o;this.ctx.beginPath(),this.ctx.arc(Math.cos(c)*f,Math.sin(c)*f,5,0,Math.PI*2),this.ctx.fillStyle=l.color,this.ctx.globalAlpha=.7,this.ctx.shadowBlur=6,this.ctx.shadowColor=l.color,this.ctx.fill(),this.ctx.shadowBlur=0,this.ctx.globalAlpha=1})}this.ctx.restore()}drawMeteor(t,e){if(t.trail.length>1){const s=t.trail[0];if(s){this.ctx.beginPath(),this.ctx.moveTo(s.x,s.y);for(const i of t.trail)i&&this.ctx.lineTo(i.x,i.y);this.ctx.strokeStyle=t.color,this.ctx.lineWidth=t.isDebris?2:1.5,this.ctx.globalAlpha=t.isDebris?.8:.4,this.ctx.stroke(),this.ctx.globalAlpha=1}}this.ctx.beginPath(),this.ctx.arc(t.x,t.y,t.size,0,Math.PI*2),this.ctx.fillStyle=t.color,t.gravityFactor<0&&(this.ctx.shadowBlur=8,this.ctx.shadowColor=t.color),this.ctx.fill(),this.ctx.shadowBlur=0}drawBigMeteor(t,e){if(this.ctx.save(),t.trail.length>1){const s=t.trail[0];if(s){const i=this.ctx.createLinearGradient(s.x,s.y,t.x,t.y);i.addColorStop(0,"transparent"),i.addColorStop(.5,`${t.color}80`),i.addColorStop(1,t.color),this.ctx.beginPath(),this.ctx.moveTo(s.x,s.y);for(let a=1;a<t.trail.length;a++){const r=t.trail[a];r&&this.ctx.lineTo(r.x,r.y)}Y(this.ctx,{color:t.color,blur:15,intensity:.6}),this.ctx.strokeStyle=i,this.ctx.lineWidth=3,this.ctx.globalAlpha=.6,this.ctx.stroke(),this.ctx.globalAlpha=1}}if(this.ctx.translate(t.x,t.y),this.ctx.rotate(t.rotation),Y(this.ctx,{color:t.color,blur:20,intensity:.8}),t.visualConfig&&t.visualConfig.points.length>0){this.ctx.beginPath();const s=t.visualConfig.points[0];if(s){this.ctx.moveTo(s.x,s.y);for(const i of t.visualConfig.points)this.ctx.lineTo(i.x,i.y);this.ctx.closePath(),this.ctx.fillStyle=t.color,this.ctx.fill()}}else this.ctx.beginPath(),this.ctx.arc(0,0,t.size,0,Math.PI*2),this.ctx.fillStyle=t.color,this.ctx.fill();if(this.ctx.restore(),t.hp<t.maxHp){const s=t.size*3,i=4,a=t.size+15;this.ctx.fillStyle="rgba(0,0,0,0.6)",this.ctx.fillRect(t.x-s/2,t.y-a,s,i);const r=Math.max(0,Math.min(1,t.hp/t.maxHp));this.ctx.fillStyle="#00ff00",this.ctx.fillRect(t.x-s/2,t.y-a,s*r,i)}}drawShip(t){if(t.navTarget&&t.state!==U.PANIC&&(this.ctx.beginPath(),this.ctx.moveTo(t.x,t.y),this.ctx.lineTo(t.navTarget.x,t.navTarget.y),this.ctx.strokeStyle="rgba(255,255,255,0.1)",this.ctx.setLineDash([3,3]),this.ctx.stroke(),this.ctx.setLineDash([])),this.ctx.save(),this.ctx.translate(t.x,t.y),this.ctx.rotate(t.angle),this.ctx.scale(t.sizeMult,t.sizeMult),t.shield>0&&(this.ctx.beginPath(),this.ctx.arc(0,0,14,0,Math.PI*2),this.ctx.strokeStyle=`rgba(59, 130, 246, ${t.shield/t.maxShield})`,this.ctx.lineWidth=1,this.ctx.stroke()),t.thrustPower>.1){const l=Math.random()*.4+.8,h=t.state===U.PANIC?180:80,c=t.thrustPower*h*l*.02;this.ctx.beginPath(),this.ctx.moveTo(-6,-2),this.ctx.lineTo(-6-c*20,0),this.ctx.lineTo(-6,2),this.ctx.fillStyle=t.state===U.PANIC?"#ef4444":M.COLORS.shipEngines,this.ctx.fill()}this.ctx.save(),Y(this.ctx,{color:t.color,intensity:1,blur:20}),this.ctx.fillStyle=t.color,this.ctx.beginPath();const e=t.visualConfig.points;if(e&&e.length>0){const l=e[0];if(l){this.ctx.moveTo(l.x,l.y);for(let h=1;h<e.length;h++){const c=e[h];c&&this.ctx.lineTo(c.x,c.y)}this.ctx.closePath()}}else this.ctx.moveTo(10,0),this.ctx.lineTo(-6,6),this.ctx.lineTo(-4,0),this.ctx.lineTo(-6,-6);this.ctx.fill(),this.ctx.strokeStyle="#fff",this.ctx.lineWidth=1,this.ctx.stroke();const s=t.visualConfig;if(s.hasCockpit&&(this.ctx.fillStyle="rgba(255, 255, 255, 0.3)",this.ctx.beginPath(),this.ctx.arc(s.length*.3,0,2,0,Math.PI*2),this.ctx.fill()),s.hasWings){const l=s.width*s.wingSize;this.ctx.strokeStyle=t.color,this.ctx.lineWidth=1.5,this.ctx.beginPath(),this.ctx.moveTo(-s.length*.2,s.width*.5),this.ctx.lineTo(-s.length*.4,s.width*.5+l),this.ctx.lineTo(-s.length*.3,s.width*.5),this.ctx.moveTo(-s.length*.2,-s.width*.5),this.ctx.lineTo(-s.length*.4,-s.width*.5-l),this.ctx.lineTo(-s.length*.3,-s.width*.5),this.ctx.stroke()}s.hasAntenna&&(this.ctx.strokeStyle=t.color,this.ctx.lineWidth=1,this.ctx.beginPath(),this.ctx.moveTo(s.length*.8,0),this.ctx.lineTo(s.length*.9,-1),this.ctx.stroke()),this.ctx.restore(),this.ctx.restore(),this.ctx.save(),this.ctx.translate(t.x,t.y);const i=-18*t.sizeMult,a=20;if(t.hp<t.maxHp&&(this.ctx.fillStyle="rgba(0,0,0,0.6)",this.ctx.fillRect(-a/2,i-3,a,3),this.ctx.fillStyle="#00ff00",this.ctx.fillRect(-a/2,i-3,a*(t.hp/t.maxHp),3)),t.weapon&&t.weapon.cooldownTimer>0){const l=t.weapon.config.cooldown,h=Math.max(0,1-t.weapon.cooldownTimer/l);this.ctx.fillStyle="rgba(0,0,0,0.6)",this.ctx.fillRect(-a/2,i+1,a,2),this.ctx.fillStyle="#fbbf24",this.ctx.fillRect(-a/2,i+1,a*h,2)}const r=i-10;this.ctx.font="10px monospace",this.ctx.textAlign="center",this.ctx.fillStyle="#ffffff";let o="";t.weapon.icon&&(o+=t.weapon.icon),o+=t.statusIcons.join(""),o&&this.ctx.fillText(o,0,r),this.ctx.restore()}drawPowerUp(t){this.ctx.save(),this.ctx.translate(t.x,t.y);const e=1+Math.sin(t.pulse)*.2;this.ctx.scale(e,e),this.ctx.shadowBlur=15,this.ctx.shadowColor=t.color,this.ctx.beginPath(),this.ctx.arc(0,0,8,0,Math.PI*2),this.ctx.strokeStyle=t.color,this.ctx.lineWidth=2,this.ctx.stroke(),this.ctx.fillStyle=t.color,this.ctx.font="12px monospace",this.ctx.textAlign="center",this.ctx.textBaseline="middle",this.ctx.shadowBlur=0;const s=X.create(t.type),i=s?s.getIcon():"?";this.ctx.fillText(i,0,1),this.ctx.restore()}drawProjectile(t){this.ctx.save(),this.ctx.translate(t.x,t.y),t.drawSpecific(this.ctx),t instanceof Zt&&t.fuel>0&&(this.ctx.rotate(0),this.ctx.fillStyle="#555",this.ctx.fillRect(-5,-10,10,2),this.ctx.fillStyle="#f59e0b",this.ctx.fillRect(-5,-10,10*(t.fuel/100),2)),this.ctx.restore()}drawParticle(t){const e=Math.max(0,t.size*t.life);this.ctx.beginPath(),this.ctx.arc(t.x,t.y,e,0,Math.PI*2),this.ctx.fillStyle=t.color,this.ctx.globalAlpha=t.life,this.ctx.fill(),this.ctx.globalAlpha=1}drawStars(t,e){for(let s=0;s<t.length;s++){const i=t[s];if(i){if(this.ctx.beginPath(),this.ctx.arc(i.x,i.y,2,0,Math.PI*2),this.ctx.fillStyle=i.color,this.ctx.fill(),e>1.1){const a=i.x-window.innerWidth/2,r=i.y-window.innerHeight/2,o=Math.sqrt(a*a+r*r)||1;this.ctx.beginPath(),this.ctx.moveTo(i.x,i.y),this.ctx.lineTo(i.x-a/o*20*(e-1),i.y-r/o*20*(e-1)),this.ctx.strokeStyle="rgba(139, 92, 246, 0.5)",this.ctx.lineWidth=2,this.ctx.stroke()}else if(e<1.2)for(let a=s+1;a<t.length;a++){const r=t[a];if(!r)continue;const o=d.dist(i,r);o<150&&(this.ctx.beginPath(),this.ctx.moveTo(i.x,i.y),this.ctx.lineTo(r.x,r.y),this.ctx.strokeStyle=`rgba(139, 92, 246, ${(1-o/150)*.25})`,this.ctx.lineWidth=1,this.ctx.stroke())}}}}drawVoidSerpent(t){if(t.navTarget&&(this.ctx.beginPath(),this.ctx.moveTo(t.x,t.y),this.ctx.lineTo(t.navTarget.x,t.navTarget.y),this.ctx.strokeStyle="rgba(139, 92, 246, 0.3)",this.ctx.lineWidth=1,this.ctx.setLineDash([2,2]),this.ctx.stroke(),this.ctx.setLineDash([])),t.segments.length<2)return;const e=t.segments[0];if(!e)return;this.ctx.beginPath(),this.ctx.moveTo(e.x,e.y);for(let a=1;a<t.segments.length-1;a++){const r=t.segments[a],o=t.segments[a+1];if(!r||!o)continue;const l=(r.x+o.x)/2,h=(r.y+o.y)/2;this.ctx.quadraticCurveTo(r.x,r.y,l,h)}this.ctx.save(),Y(this.ctx,{color:t.color,intensity:t.life,blur:25}),this.ctx.strokeStyle=t.color;const s=Math.max(0,3*t.life*t.sizeMult);this.ctx.lineWidth=s,this.ctx.lineCap="round",this.ctx.globalAlpha=Math.max(0,Math.min(1,t.life)),s>0&&this.ctx.stroke(),this.ctx.restore();const i=Math.max(0,4*t.life*t.sizeMult);i>0&&(this.ctx.save(),Y(this.ctx,{color:"#ffffff",intensity:t.life,blur:20}),this.ctx.beginPath(),this.ctx.arc(e.x,e.y,i,0,Math.PI*2),this.ctx.fillStyle="#ffffff",this.ctx.fill(),this.ctx.restore()),this.ctx.save(),this.ctx.translate(e.x,e.y),this.ctx.fillStyle="rgba(255,0,0,0.5)",this.ctx.fillRect(-15,-20,30,3),this.ctx.fillStyle="#00ff00",this.ctx.fillRect(-15,-20,30*(t.hp/t.maxHp),3),this.ctx.restore(),this.ctx.globalAlpha=1,this.ctx.shadowBlur=0}}class Ue{segments=[];active=!1;life=0;generate(t,e,s,i){this.segments=[],this.active=!0,this.life=1;const a=Math.floor(d.randomRange(5,12)),r=Math.random()*Math.PI*2;for(let o=0;o<a;o++){let l=r+Math.PI*2*o/a+d.randomRange(-.4,.4),h=t,c=e;const f=Math.max(s,i)*d.randomRange(.5,.9);let p=0;for(;p<f;){const T=d.randomRange(40,120);l+=d.randomRange(-.6,.6);const y=h+Math.cos(l)*T,E=c+Math.sin(l)*T;if(this.segments.push({x1:h,y1:c,x2:y,y2:E,width:Math.max(1,6-p/150),alpha:d.randomRange(.4,1)}),Math.random()<.3){const P=l+d.randomRange(.5,1.5)*(Math.random()>.5?1:-1),k=d.randomRange(30,60);this.segments.push({x1:h,y1:c,x2:h+Math.cos(P)*k,y2:c+Math.sin(P)*k,width:1,alpha:.5})}h=y,c=E,p+=T}}}update(t){this.active&&(t?this.life-=.015:this.life=1-Math.random()*.1,this.life<=0&&(this.active=!1,this.segments=[]))}draw(t){if(this.active){t.save(),t.lineCap="round",t.strokeStyle="#a5f3fc",t.beginPath();for(let e=0;e<this.segments.length;e++){const s=this.segments[e];s&&this.life*s.alpha>.05&&(t.lineWidth=s.width*this.life,t.moveTo(s.x1,s.y1),t.lineTo(s.x2,s.y2))}t.globalAlpha=this.life,t.stroke(),t.restore()}}}class Et{update(t,e){t.mass>=M.CRITICAL_MASS&&t.setState(D.UNSTABLE)}}class je{update(t,e){const s=e.warpFactor;t.shake+=.8*s,t.shake>120&&(t.setState(D.EXPLODING),t.shockwaveRadius=1,e.spawnSupernovaDebris())}}class We{update(t,e){const s=e.warpFactor;t.shockwaveRadius+=25*s,t.shake=0,t.shockwaveRadius>Math.max(e.width,e.height)*1.5&&(t.setState(D.REFORMING),t.mass=0,t.safetyTimer=200,e.initStars())}}class Xe{update(t,e){const s=e.warpFactor;t.radius>M.START_RADIUS+1?t.radius-=1*s:t.setState(D.STABLE)}}class Ve extends V{mass=0;radius=M.START_RADIUS;visualRadius=M.START_RADIUS;pulse=0;state=D.STABLE;shake=0;shockwaveRadius=0;safetyTimer=0;darkMatterTimer=0;upgrades={serpentBaseCost:0,serpentHealth:0,serpentSpeed:0,serpentDamage:0,balanceRate:0};debuffs={serpentCost:0,balanceRate:0,darkMatterRate:0};currentState=new Et;states=new Map([[D.STABLE,new Et],[D.UNSTABLE,new je],[D.EXPLODING,new We],[D.REFORMING,new Xe]]);constructor(t,e){super(t,e,"#000000")}setState(t){this.state=t,this.currentState=this.states.get(t)||new Et}update(t){const e=t.warpFactor;this.pulse+=.05*e;const s=this.mass/M.CRITICAL_MASS,i=M.START_RADIUS+s*80;if(this.radius+=(i-this.radius)*.05*e,this.visualRadius=this.radius+Math.sin(this.pulse)*2,this.safetyTimer>0&&this.safetyTimer--,this.state!==D.UNSTABLE&&this.shake>0&&(this.shake*=.9),this.darkMatterTimer++,this.darkMatterTimer>=60){const r=this.upgrades.balanceRate*50,o=this.debuffs.balanceRate*10,l=this.debuffs.darkMatterRate*5;x.darkMatter+=Math.max(0,100+r-o-l),this.darkMatterTimer=0}this.currentState.update(this,t)}}class Ye extends V{constructor(t,e){super(t,e,"rgba(139, 92, 246, 0.6)"),this.vx=d.randomRange(-.5,.5),this.vy=d.randomRange(-.5,.5)}update(t){if(t.warpFactor>1.1){const e=this.x-t.width/2,s=this.y-t.height/2,i=Math.sqrt(e*e+s*s)||1;this.x+=e/i*2*t.warpFactor,this.y+=s/i*2*t.warpFactor}else if(t.blackHole.state===D.EXPLODING){const e=t.blackHole,s=d.dist(this,e);if(s<e.shockwaveRadius+100&&s>e.shockwaveRadius-50){const i=d.angle(e,this);this.vx+=Math.cos(i)*5,this.vy+=Math.sin(i)*5}}this.applyPhysics(1,.95),(this.x<0||this.x>t.width||this.y<0||this.y>t.height)&&(t.warpFactor>1.1?(this.x=t.width/2+d.randomRange(-50,50),this.y=t.height/2+d.randomRange(-50,50)):(this.vx*=-1,this.vy*=-1))}}class Nt extends V{size;trail=[];isDebris;gravityFactor;friction;label;constructor(t,e,s,i,a,r){const o=!a&&Math.random()>.85,l=o?M.COLORS.repel:Math.random()>.6?M.COLORS.secondary:M.COLORS.white,h=d.randomChoice([M.COLORS.white,M.COLORS.primary,M.COLORS.secondary,M.COLORS.danger]);super(t,e,a?h:l),this.vx=s,this.vy=i,this.isDebris=a,this.label=r,this.size=r?4:d.randomRange(2,5),this.gravityFactor=a?-1.5:o?-2:4,this.friction=a?.98:1}update(t){const e=t.blackHole,s=d.dist(this,e),i=d.angle(this,e);if(e.state===D.EXPLODING)s<e.shockwaveRadius+50&&s>e.shockwaveRadius-100&&(this.vx-=Math.cos(i)*5,this.vy-=Math.sin(i)*5,this.isDebris&&(this.vx-=Math.cos(i)*2,this.vy-=Math.sin(i)*2));else{if(e.safetyTimer===0&&s<e.visualRadius){t.createExplosion(this.x,this.y,5,this.color),e.mass+=M.MASS_GAIN_METEOR,x.darkMatter+=50,this.markedForDeletion=!0;return}const o=.4+e.mass/M.CRITICAL_MASS*.6,l=M.GRAVITY_RADIUS_BASE*(.5+o*.5);if(s<l){const h=1-s/l,f=(this.gravityFactor>0?2.5*(h*h):.5*h)*this.gravityFactor*t.warpFactor*o,p=(this.gravityFactor>0?.05:.1)*t.warpFactor;this.vx+=Math.cos(i)*f+Math.cos(i+Math.PI/2)*p,this.vy+=Math.sin(i)*f+Math.sin(i+Math.PI/2)*p,this.gravityFactor>0&&s<350&&(this.vx*=.96,this.vy*=.96)}}this.vx*=this.friction,this.vy*=this.friction;const a=t.warpFactor>1.1?t.warpFactor*.5:1;this.x+=this.vx*a,this.y+=this.vy*a,this.trail.push({x:this.x,y:this.y});const r=(this.isDebris?8:14)*t.warpFactor;this.trail.length>r&&this.trail.shift(),(this.x<-500||this.x>t.width+500||this.y<-500||this.y>t.height+500)&&(this.markedForDeletion=!0)}}var kt=(n=>(n.IRREGULAR="IRREGULAR",n.ROCKY="ROCKY",n.SPIKY="SPIKY",n.ROUNDED="ROUNDED",n.ANGULAR="ANGULAR",n))(kt||{});class qe{static seedCounter=0;static generate(t,e){const s=this.createRNG(e),i=Object.values(kt),a=i[Math.floor(s()*i.length)],r=.3+s()*.5,o=s(),l=this.generateShapePoints(a,t,r,s);return{shapeType:a,size:t,irregularity:r,detailLevel:o,points:l}}static createRNG(t){t===void 0&&(t=Date.now()+this.seedCounter++);let e=t;return()=>(e=(e*9301+49297)%233280,e/233280)}static generateShapePoints(t,e,s,i){const a=[],r=6+Math.floor(i()*4);switch(t){case"IRREGULAR":for(let o=0;o<r;o++){const l=o/r*Math.PI*2,h=e*(.7+i()*.6*s);a.push({x:Math.cos(l)*h,y:Math.sin(l)*h})}break;case"ROCKY":for(let o=0;o<r;o++){const l=o/r*Math.PI*2,h=e*(.8+i()*.4*s);a.push({x:Math.cos(l)*h,y:Math.sin(l)*h})}break;case"SPIKY":for(let o=0;o<r;o++){const l=o/r*Math.PI*2,h=o%2===0?1.2:.8,c=e*h*(.7+i()*.3*s);a.push({x:Math.cos(l)*c,y:Math.sin(l)*c})}break;case"ROUNDED":for(let o=0;o<r;o++){const l=o/r*Math.PI*2,h=e*(.85+i()*.3*s);a.push({x:Math.cos(l)*h,y:Math.sin(l)*h})}break;case"ANGULAR":for(let o=0;o<r;o++){const l=o/r*Math.PI*2,h=e*(.75+i()*.5*s);a.push({x:Math.cos(l)*h,y:Math.sin(l)*h})}break}return a}static getRandomShapeType(){const t=Object.values(kt);return t[Math.floor(Math.random()*t.length)]}}class Je extends V{size;trail=[];gravityFactor=4;friction=1;rotation=0;rotationSpeed=0;hp=5;maxHp=5;visualConfig;constructor(t,e,s,i){const a=Math.random()>.6?M.COLORS.secondary:M.COLORS.white;super(t,e,a),this.size=d.randomRange(6,15),this.hp=5,this.maxHp=5,this.rotationSpeed=d.randomRange(-.05,.05),this.rotation=Math.random()*Math.PI*2,this.visualConfig=qe.generate(this.size),this.vx=s*.4,this.vy=i*.4}update(t){const e=t.blackHole,s=d.dist(this,e),i=d.angle(this,e),a=t.width/2,r=t.height/2,o=d.angle(this,{x:a,y:r});if(e.state===D.EXPLODING){if(s<e.shockwaveRadius+50&&s>e.shockwaveRadius-100){const f=this.vx-Math.cos(i)*2,p=this.vy-Math.sin(i)*2,T=Math.sqrt(this.vx*this.vx+this.vy*this.vy),y=Math.sqrt(f*f+p*p);((this.vx*f+this.vy*p)/(T*y+.001)>.5||T<.5)&&(this.vx=f,this.vy=p)}}else{const c=Math.sqrt(this.vx*this.vx+this.vy*this.vy);if(c>.1){const p=Math.cos(o)*c,T=Math.sin(o)*c;this.vx=this.vx*(1-.05)+p*.05,this.vy=this.vy*(1-.05)+T*.05}if(e.safetyTimer===0&&s<e.visualRadius){t.createExplosion(this.x,this.y,15,this.color),e.mass+=M.MASS_GAIN_METEOR*3,x.darkMatter+=500,this.markedForDeletion=!0;return}}this.vx*=this.friction,this.vy*=this.friction;const l=t.warpFactor>1.1?t.warpFactor*.5:1;this.x+=this.vx*l,this.y+=this.vy*l,this.rotation+=this.rotationSpeed*t.warpFactor,this.trail.push({x:this.x,y:this.y});const h=30*t.warpFactor;this.trail.length>h&&this.trail.shift();for(const c of t.ships){const f=c.sizeMult*5;q.checkCircleCollision(this,c,this.size,f)&&(c.takeDamage(t,9999),t.createExplosion(c.x,c.y,20,c.color))}for(const c of t.serpents)for(const f of c.segments)if(q.checkCircleCollision(this,f,this.size,0)){c.takeDamage(t,9999),t.createExplosion(f.x,f.y,20,c.color);break}for(const c of t.meteors)q.checkCircleCollision(this,c,this.size,c.size)&&(c.markedForDeletion=!0,t.createExplosion(c.x,c.y,10,c.color));if(this.hp<=0){t.createExplosion(this.x,this.y,50,this.color),this.markedForDeletion=!0;return}(this.x<-500||this.x>t.width+500||this.y<-500||this.y>t.height+500)&&(this.markedForDeletion=!0)}}class zt{static getAvoidanceVector(t,e,s){let i=0,a=0;for(const r of e){if(r===t)continue;const o=d.dist(t,r);if(o<s&&o>0){const l=1-o/s;i-=(r.x-t.x)/o*l,a-=(r.y-t.y)/o*l}}return{x:i,y:a}}static getPathToTarget(t,e,s){const i=d.angle(t,e);if(t.state===U.PANIC)return d.angle(s,t);const a=d.dist(t,s),r=d.dist(t,e),o=d.angle(t,s),l=Math.abs(d.normalizeAngle(i-o));if(s.state!==D.EXPLODING&&a<r&&l<.8&&a<500){const h=d.normalizeAngle(o-t.angle)>0?-1:1;return o+Math.PI/2*h}return i}}class Pt extends K{config={cooldown:40,damage:1,speed:12,spread:.05,color:null,size:2};icon="";duration=600;spawnProjectiles(t,e,s,i){const a=(Math.random()-.5)*this.config.spread,r=e.vx+Math.cos(s+a)*this.config.speed,o=e.vy+Math.sin(s+a)*this.config.speed;t.projectiles.push(new nt(e.x,e.y,r,o,e.color,this.config.damage*i,this.config.size,60))}generateVisual(t,e){const s=Z.createCanvas(t,e),i=s.getContext("2d");return i.save(),i.strokeStyle="#8b5cf6",i.shadowColor="#8b5cf6",i.shadowBlur=15,i.lineWidth=2,i.beginPath(),i.moveTo(t/2,e/2),i.lineTo(t/2-20,e/2),i.stroke(),i.restore(),{canvas:s,width:t,height:e,key:"blaster"}}}class tt{static getDamageMultiplier(){return 1+(x.damageLevel-1)*.2}static getReloadMultiplier(){return 1+(x.turretSpeed-1)*.15}static getRegenRate(){return Math.max(60,360-x.regenLevel*60)}static getRegenLevel(){return x.regenLevel}static getCritLevel(){return x.critLevel}static getHullLevel(){return x.hullLevel}static getShieldLevel(){return x.shieldLevel}}class Lt{static instance=null;static getInstance(){return this.instance||(this.instance=new Lt),this.instance}updateRegen(t,e){if(tt.getRegenLevel()===0||t.hp===void 0||t.maxHp===void 0||t.hp>=t.maxHp)return!1;e.value++;const s=tt.getRegenRate();return e.value>s?(t.hp++,e.value=0,!0):!1}}class $t{static calculateCritDamage(t,e){const i=(e??tt.getCritLevel())*.05;return Math.random()<i?{damage:t*2,isCrit:!0}:{damage:t,isCrit:!1}}}var Dt=(n=>(n.TRIANGLE="TRIANGLE",n.ARROW="ARROW",n.DIAMOND="DIAMOND",n.FIGHTER="FIGHTER",n.INTERCEPTOR="INTERCEPTOR",n.SCOUT="SCOUT",n.CRUISER="CRUISER",n.BOMBER="BOMBER",n))(Dt||{}),_t=(n=>(n.SHARP="SHARP",n.ROUNDED="ROUNDED",n.ANGULAR="ANGULAR",n))(_t||{});class Ke{static seedCounter=0;static generate(t){const e=this.createRNG(t),s=Object.values(Dt),i=s[Math.floor(e()*s.length)],a=Object.values(_t),r=a[Math.floor(e()*a.length)],o=8+e()*6,l=4+e()*4,h=e(),c=e()>.4,f=e()>.6,p=e()>.7,T=c?.5+e()*.5:0,y=e(),E=this.generateHullPoints(i,r,o,l,h,e);return{hullType:i,style:r,length:o,width:l,noseSharpness:h,hasWings:c,hasCockpit:f,hasAntenna:p,wingSize:T,detailLevel:y,points:E}}static createRNG(t){t===void 0&&(t=Date.now()+this.seedCounter++);let e=t;return()=>(e=(e*9301+49297)%233280,e/233280)}static generateHullPoints(t,e,s,i,a,r){const o=[];switch(t){case"TRIANGLE":o.push({x:s,y:0}),o.push({x:-s*.4,y:i}),o.push({x:-s*.2,y:0}),o.push({x:-s*.4,y:-i});break;case"ARROW":const l=s*(.7+a*.3);o.push({x:l,y:0}),o.push({x:-s*.3,y:i*.8}),o.push({x:-s*.5,y:0}),o.push({x:-s*.3,y:-i*.8});break;case"DIAMOND":o.push({x:s*.6,y:0}),o.push({x:0,y:i}),o.push({x:-s*.6,y:0}),o.push({x:0,y:-i});break;case"FIGHTER":o.push({x:s,y:0}),o.push({x:-s*.2,y:i*1.2}),o.push({x:-s*.4,y:i*.3}),o.push({x:-s*.3,y:0}),o.push({x:-s*.4,y:-i*.3}),o.push({x:-s*.2,y:-i*1.2});break;case"INTERCEPTOR":o.push({x:s*1.2,y:0}),o.push({x:-s*.3,y:i*.6}),o.push({x:-s*.1,y:0}),o.push({x:-s*.3,y:-i*.6});break;case"SCOUT":o.push({x:s*.8,y:0}),o.push({x:-s*.3,y:i*.7}),o.push({x:-s*.2,y:0}),o.push({x:-s*.3,y:-i*.7});break;case"CRUISER":o.push({x:s*.9,y:0}),o.push({x:-s*.1,y:i*1.3}),o.push({x:-s*.3,y:i*.5}),o.push({x:-s*.4,y:0}),o.push({x:-s*.3,y:-i*.5}),o.push({x:-s*.1,y:-i*1.3});break;case"BOMBER":o.push({x:s*.7,y:0}),o.push({x:0,y:i*1.1}),o.push({x:-s*.4,y:i*.8}),o.push({x:-s*.5,y:0}),o.push({x:-s*.4,y:-i*.8}),o.push({x:0,y:-i*1.1});break}return o}static getRandomHullType(){const t=Object.values(Dt);return t[Math.floor(Math.random()*t.length)]}static getRandomStyle(){const t=Object.values(_t);return t[Math.floor(Math.random()*t.length)]}}let Ze=class extends V{visualConfig;angle;cooldown=0;bombCooldown=0;thrustPower=0;hp=5;maxHp=5;state=U.ROAM;navTarget=null;targetType=null;wanderTarget=null;combatTimer=0;combatManeuver=rt.FLANK;activeEffects=[];statusIcons=[];weapon;weaponTimer=0;shield=0;maxShield=5;hasTeleport=!1;bombLevel=1;rangeMult=1;sizeMult=1;regenTimer=0;speedMult=1;damageMult=1;reloadMult=1;isJammed=!1;constructor(t,e,s){super(t,e,d.randomColor()),this.angle=s,this.weapon=new Pt,this.visualConfig=Ke.generate(),this.maxHp=5+(tt.getHullLevel()-1)*3,this.hp=this.maxHp,this.maxShield=tt.getShieldLevel()*5,this.shield=this.maxShield,this.cooldown=d.randomRange(0,100),this.bombCooldown=d.randomRange(0,500)}applyPowerUp(t){X.apply(t.type,this)}findBestTarget(t){let e=null,s=1/0;for(const l of t.powerUps){if(!l.isGood)continue;const h=d.dist(this,l);h<s&&h<500&&(s=h,e=l)}if(e)return{target:e,type:W.POWERUP};if(t.bigMeteor&&d.dist(this,t.bigMeteor)<800)return{target:t.bigMeteor,type:W.POINT};let i=null,a=1/0;for(const l of t.serpents){const h=d.dist(this,l);h<a&&(a=h,i=l)}if(i&&i.segments.length>0){const l=i.segments[0];if(l)return{target:l,type:W.SERPENT}}let r=null,o=1/0;for(const l of t.ships){if(l===this)continue;const h=d.dist(this,l);h<o&&(o=h,r=l)}return r&&o<1e3?{target:r,type:W.SHIP}:((!this.wanderTarget||d.dist(this,this.wanderTarget)<100)&&(this.wanderTarget={x:d.randomRange(100,t.width-100),y:d.randomRange(100,t.height-100)}),{target:this.wanderTarget,type:W.POINT})}update(t){this.speedMult=1,this.damageMult=tt.getDamageMultiplier(),this.reloadMult=tt.getReloadMultiplier(),this.isJammed=!1,this.sizeMult=1;for(let w=this.activeEffects.length-1;w>=0;w--){const A=this.activeEffects[w];if(!A){this.activeEffects.splice(w,1);continue}A.timer--;const R=X.create(A.type);R&&R.updateEffect&&R.updateEffect(this,A),A.timer<=0&&(this.activeEffects.splice(w,1),R&&R.removeEffect&&R.removeEffect(this))}if(this.sizeMult<1&&(this.speedMult*=1.3),this.sizeMult>1&&(this.speedMult*=.8),this.weaponTimer>0&&(this.weaponTimer--,this.weaponTimer<=0&&(this.weapon=new Pt)),this.weapon.update(),this.hasTeleport){const w=X.create("GET_TELEPORT");w&&"tryTeleport"in w&&w.tryTeleport(this,t)}const e=t.blackHole,s=d.dist(this,e),i=d.angle(this,e);if(pt.shouldDieFromShockwave(this,e)){this.die(t);return}if(pt.shouldDieFromGravity(this,e)){e.mass+=M.MASS_GAIN_SHIP,this.die(t);return}const a=pt.calculateGravityPull(this,e);a&&(this.vx+=a.vx,this.vy+=a.vy);const{target:r,type:o}=this.findBestTarget(t);this.navTarget=r,this.targetType=o;let l=this.angle,h=.4;const c=180+e.mass/M.CRITICAL_MASS*200;if(e.state!==D.EXPLODING&&s<c)this.state=U.PANIC,l=d.angle(e,this),h=1;else if(r){const w=d.dist(this,r),A=d.angle(this,r),R=Math.abs(d.normalizeAngle(A-i));if(s<w&&R<.8&&e.state!==D.EXPLODING){const F=d.normalizeAngle(i-this.angle)>0?-1:1;l=i+Math.PI/2*F,this.state=U.ROAM}else{const F=t.bigMeteor&&r===t.bigMeteor;if(o===W.SERPENT||o===W.SHIP||F){this.state=U.DOGFIGHT;const et=d.dist(this,r);this.handleCombat(t,r,et,o===W.SERPENT),l=this.combatManeuverAngle(r,et),h=et>400?.7:.5}else this.state=U.ROAM,l=zt.getPathToTarget(this,r,e),h=.4}}const f=zt.getAvoidanceVector(this,t.ships,M.SHIP_SEPARATION);if(this.vx+=f.x*.5,this.vy+=f.y*.5,t.bigMeteor){const w=d.dist(this,t.bigMeteor),A=t.bigMeteor.size+100;if(w<A&&w>0){const R=d.angle(t.bigMeteor,this),B=(1-w/A)*2;this.vx+=Math.cos(R)*B,this.vy+=Math.sin(R)*B}}const p=Lt.getInstance(),T={value:this.regenTimer};p.updateRegen(this,T)&&t.createExplosion(this.x,this.y,2,"#10b981"),this.regenTimer=T.value;const y=tt.getShieldLevel()*5;this.maxShield<y&&(this.shield+=y-this.maxShield,this.maxShield=y),this.cooldown--,this.bombCooldown--;let E=d.normalizeAngle(l-this.angle);const P=this.state===U.DOGFIGHT?M.SHIP_TURN_SPEED*2:M.SHIP_TURN_SPEED;this.angle+=Math.sign(E)*Math.min(Math.abs(E),P),this.vx+=Math.cos(this.angle)*h,this.vy+=Math.sin(this.angle)*h,this.vx*=.96,this.vy*=.96;const k=Math.hypot(this.vx,this.vy),b=(this.state===U.PANIC?M.SHIP_SPEED*2:M.SHIP_SPEED)*this.speedMult;k>b&&(this.vx=this.vx/k*b,this.vy=this.vy/k*b),this.thrustPower=h;const u=t.warpFactor>1.1?t.warpFactor*.7:1;this.x+=this.vx*u,this.y+=this.vy*u;const m=30;this.x<-m?this.x=t.width+m:this.x>t.width+m&&(this.x=-m),this.y<-m?this.y=t.height+m:this.y>t.height+m&&(this.y=-m)}combatManeuverAngle(t,e){const s=d.angle(this,t);if(this.combatTimer--,this.combatTimer<=0){this.combatTimer=d.randomRange(60,120);const i=Math.random();this.combatManeuver=i<.4?rt.CHARGE:i<.8?rt.FLANK:rt.RETREAT}return this.combatManeuver===rt.CHARGE?s:this.combatManeuver===rt.RETREAT?s+Math.PI:s+Math.PI/2}handleCombat(t,e,s,i){if(t.bigMeteor&&e===t.bigMeteor){const p=e.vx||0,T=e.vy||0,y=e.x+p*15,E=e.y+T*15,P=d.angle(this,{x:y,y:E}),k=Math.abs(d.normalizeAngle(P-this.angle));if(this.weapon.isReady&&!this.isJammed){const b=this.weapon.getAllowedAngle(),u=this.weapon.getRange(M.SHIP_ENGAGEMENT_DIST);if(s<u&&k<b){const m=$t.calculateCritDamage(this.damageMult);this.weapon.fire(t,this,P,m.damage,this.reloadMult)}}if(this.bombLevel>0&&this.bombCooldown<=0){const b=d.angle(this,e),u=Math.abs(d.normalizeAngle(b-this.angle));s<600&&u<.8&&(this.bombLevel===2?M.BOMB_DAMAGE*2:M.BOMB_DAMAGE,t.spawnBomb(this.x,this.y,this.vx,this.vy,b,this.bombLevel),this.bombCooldown=400)}return}const r=e.vx||0,o=e.vy||0,l=e.x+r*15,h=e.y+o*15,c=d.angle(this,{x:l,y:h}),f=Math.abs(d.normalizeAngle(c-this.angle));if(this.weapon.isReady&&!this.isJammed){const p=this.weapon.getAllowedAngle(),T=this.weapon.getRange(M.SHIP_ENGAGEMENT_DIST);if(s<T&&f<p){const y=$t.calculateCritDamage(this.damageMult);this.weapon.fire(t,this,c,y.damage,this.reloadMult)}}if(this.bombLevel>0&&this.bombCooldown<=0){const p=X.create("UPGRADE_BOMB");p&&"tryFireBomb"in p&&p.tryFireBomb(this,t)}}takeDamage(t,e=1){t.spawnDamageText(this.x,this.y,e,!1),this.shield>0?(this.shield-=e,t.createExplosion(this.x,this.y,5,M.COLORS.shield),this.shield<0&&(this.hp+=this.shield,this.shield=0)):(this.hp-=e,t.createExplosion(this.x,this.y,10,this.color)),this.hp<=0&&this.die(t)}die(t){t.createExplosion(this.x,this.y,50,this.color),this.markedForDeletion=!0}};class Qe extends V{radius=1;maxRadius=250;life=1;constructor(t,e){super(t,e,"#ffffff")}update(t){this.radius+=8*t.warpFactor,this.life-=.03,this.life<=0&&(this.markedForDeletion=!0)}draw(t){t.save(),t.beginPath(),t.arc(this.x,this.y,this.radius,0,Math.PI*2),t.strokeStyle=`rgba(255, 200, 200, ${this.life})`,t.lineWidth=20*this.life,t.stroke(),t.restore()}}class ts{static totalWeight=0;static initialized=!1;static upgradeList=[];static initialize(){if(this.initialized)return;const t=["SPEED_BOOST","DAMAGE_BOOST","SIZE_UP","SIZE_DOWN","GET_SHIELD","GET_TELEPORT","UPGRADE_RANGE","UPGRADE_BOMB","HEAL","COIN","GET_MINIGUN","GET_SHOTGUN","GET_RAILGUN","GET_MISSILE","GET_PLASMA","GET_FLAK","GET_WAVE","GET_SNIPER","SLOW_DOWN","WEAPON_JAM"];this.upgradeList=[];for(const e of t){const s=X.create(e);s&&s.weight>0&&this.upgradeList.push(s)}this.totalWeight=this.upgradeList.reduce((e,s)=>e+s.weight,0),this.initialized=!0}static generateType(){if(this.initialize(),this.upgradeList.length===0)return{type:"HEAL",isGood:!0};const t=Math.random()*this.totalWeight;let e=0;for(const i of this.upgradeList)if(e+=i.weight,t<e)return{type:i.type,isGood:i.isGood};const s=this.upgradeList[this.upgradeList.length-1];return s?{type:s.type,isGood:s.isGood}:{type:"HEAL",isGood:!0}}}class es extends V{type;isGood;life=1200;pulse=0;constructor(t,e){const{type:s,isGood:i}=ts.generateType();super(t,e,i?M.COLORS.buff:M.COLORS.debuff),this.type=s,this.isGood=i,this.vx=d.randomRange(-2,2),this.vy=d.randomRange(-2,2)}update(t){this.x+=this.vx*t.warpFactor,this.y+=this.vy*t.warpFactor,this.vx*=.92,this.vy*=.92,this.pulse+=.1,this.life--,this.life<=0&&(this.markedForDeletion=!0)}}class Bt extends Jt{constructor(t,e,s,i=!1){const a=Math.floor(s).toString(),r=i?"#ef4444":"#ffffff",o=i?24:14,l=d.randomRange(-10,10),h=d.randomRange(-10,10);super(t+l,e+h,a,r),this.size=o,i&&(this.vy=-2,this.vx=d.randomRange(-1,1))}static create(t,e,s,i=!1){return new Bt(t,e,s,i)}}class ss{static applyAoeDamage(t,e,s,i,a){const r=[];for(const o of a){let l=!1;for(const h of o.segments)if(d.dist({x:t,y:e},h)<s){l=!0;break}if(l){const h=d.angle({x:t,y:e},o);r.push({serpent:o,damage:i,pushAngle:h})}}return r}}class is{canvas;renderer;width=0;height=0;warpFactor=1;mouse={x:-1e3,y:-1e3,down:!1};blackHole;stars=[];meteors=[];bigMeteor=null;ships=[];projectiles=[];particles=[];serpents=[];cracks;shockwaves=[];powerUps=[];floatingTexts=[];constructor(t){this.canvas=t,this.renderer=new Fe(t.getContext("2d")),this.blackHole=new Ve(0,0),this.cracks=new Ue,this.resize(),this.initStars()}resize(){this.width=window.innerWidth,this.height=window.innerHeight,this.canvas.width=this.width,this.canvas.height=this.height,this.blackHole.x=this.width/2,this.blackHole.y=this.height/2,this.stars.length===0&&this.initStars()}initStars(){this.stars=[];for(let t=0;t<M.POINT_COUNT;t++)this.stars.push(new Ye(d.randomRange(0,this.width),d.randomRange(0,this.height)))}spawnMeteor(){const t=Math.random()*Math.PI*2,e=Math.max(this.width,this.height)*.7,s=this.blackHole.x+Math.cos(t)*e,i=this.blackHole.y+Math.sin(t)*e,r=Math.random()>.85?500:100,o=this.blackHole.x+(Math.random()-.5)*r,l=this.blackHole.y+(Math.random()-.5)*r,h=d.angle({x:s,y:i},{x:o,y:l}),c=d.randomRange(2,4);this.meteors.push(new Nt(s,i,Math.cos(h)*c,Math.sin(h)*c,!1))}spawnBigMeteor(){if(this.bigMeteor!==null)return;const t=Math.random()*Math.PI*2,e=Math.max(this.width,this.height)*.7,s=this.blackHole.x+Math.cos(t)*e,i=this.blackHole.y+Math.sin(t)*e,a=this.width/2,r=this.height/2,o=d.angle({x:s,y:i},{x:a,y:r}),l=d.randomRange(1.5,2.5);this.bigMeteor=new Je(s,i,Math.cos(o)*l,Math.sin(o)*l)}spawnShip(){const t=Math.random()*Math.PI*2,e=Math.max(this.width,this.height)/2+50,s=this.width/2+Math.cos(t)*e,i=this.height/2+Math.sin(t)*e;this.ships.push(new Ze(s,i,t+Math.PI))}spawnLaser(t,e,s,i,a,r,o=1){const h=new Pt().config,c=(Math.random()-.5)*h.spread,f=s+Math.cos(a+c)*h.speed,p=i+Math.sin(a+c)*h.speed;this.projectiles.push(new nt(t+Math.cos(a)*15,e+Math.sin(a)*15,f,p,r||"#8b5cf6",h.damage*o,2,60))}spawnPowerUp(){let t,e,s;do t=d.randomRange(50,this.width-50),e=d.randomRange(50,this.height-50),s=d.dist({x:t,y:e},this.blackHole);while(s<200);this.powerUps.push(new es(t,e))}spawnBomb(t,e,s,i,a,r=1){const o=M.BOMB_DAMAGE+(r-1)*10;this.projectiles.push(new De(t+Math.cos(a)*10,e+Math.sin(a)*10,s+Math.cos(a)*6,i+Math.sin(a)*6,o))}createExplosion(t,e,s,i){if(this.particles.length>300)return;const a=Math.floor(s*.5);for(let r=0;r<a;r++){const o=Math.random()*Math.PI*2,l=d.randomRange(2,12);this.particles.push(new Kt(t,e,i,d.randomRange(2,6),Math.cos(o)*l,Math.sin(o)*l))}}spawnSupernovaDebris(){for(let e=0;e<60;e++){const s=Math.random()*Math.PI*2,i=d.randomRange(15,40);this.meteors.push(new Nt(this.blackHole.x,this.blackHole.y,Math.cos(s)*i,Math.sin(s)*i,!0))}this.createExplosion(this.blackHole.x,this.blackHole.y,50,"#ffffff"),this.cracks.generate(this.blackHole.x,this.blackHole.y,this.width,this.height)}spawnSerpent(){const t=new wt(this.blackHole.x,this.blackHole.y),e=this.blackHole.upgrades;t.maxHp+=e.serpentHealth*10,t.hp=t.maxHp,t.speed+=e.serpentSpeed*.5,t.damageMult+=e.serpentDamage*.5,this.serpents.push(t)}applyDebuffsToBlackHole(){this.blackHole.debuffs.serpentCost=x.blackHoleSerpentCostDebuff,this.blackHole.debuffs.balanceRate=x.blackHoleBalanceRateDebuff,this.blackHole.debuffs.darkMatterRate=x.blackHoleDarkMatterRateDebuff}autoBuyBlackHoleUpgrades(){const t=[{type:"serpentBaseCost",cost:this.getBlackHoleUpgradeCost("serpentBaseCost")},{type:"serpentHealth",cost:this.getBlackHoleUpgradeCost("serpentHealth")},{type:"serpentSpeed",cost:this.getBlackHoleUpgradeCost("serpentSpeed")},{type:"serpentDamage",cost:this.getBlackHoleUpgradeCost("serpentDamage")},{type:"balanceRate",cost:this.getBlackHoleUpgradeCost("balanceRate")}];t.sort((e,s)=>e.cost-s.cost);for(const e of t)if(x.darkMatter>=e.cost){x.darkMatter-=e.cost,this.blackHole.upgrades[e.type]++;break}}getBlackHoleUpgradeCost(t){const e=this.blackHole.upgrades[t],s={serpentBaseCost:200,serpentHealth:300,serpentSpeed:250,serpentDamage:400,balanceRate:500},i={serpentBaseCost:1.5,serpentHealth:1.6,serpentSpeed:1.55,serpentDamage:1.65,balanceRate:1.7},a=s[t],r=i[t];return Math.floor(a*Math.pow(r,e))}addCoins(t,e,s){x.coins+=t;const i=it.create(e,s,t);this.floatingTexts.push(i)}addDarkMatter(t,e,s){x.darkMatter+=t;const i=it.create(e,s,t);i.text=`+${Math.floor(t)}‚ö´`,i.color="#8b5cf6",this.floatingTexts.push(i)}spawnDamageText(t,e,s,i){const a=Bt.create(t,e,s,i);this.floatingTexts.push(a)}spawnShockwave(t,e){this.shockwaves.push(new Qe(t,e));const s=ss.applyAoeDamage(t,e,250,10,this.serpents);for(const{serpent:i,damage:a,pushAngle:r}of s)i.takeDamage(this,a),i.x+=Math.cos(r)*20,i.y+=Math.sin(r)*20}update(){this.mouse.down?this.warpFactor+=(5-this.warpFactor)*.05:this.warpFactor+=(1-this.warpFactor)*.05,this.renderer.clear(this.width,this.height,this.warpFactor,this.blackHole.state===D.EXPLODING,this.blackHole.shockwaveRadius),this.cracks.update(this.blackHole.state===D.REFORMING),this.renderer.ctx&&this.cracks.draw(this.renderer.ctx),this.blackHole.update(this),this.renderer.drawBlackHole(this.blackHole),this.stars.forEach(o=>o.update(this)),this.renderer.drawStars(this.stars,this.warpFactor);const t=this.blackHole.upgrades.serpentBaseCost*50,e=this.blackHole.debuffs.serpentCost*50,s=Math.max(100,500-t+e),i=this.serpents.length>0?100*Math.pow(2,this.serpents.length-1):0,a=s+i;this.blackHole.state===D.STABLE&&x.darkMatter<a&&this.autoBuyBlackHoleUpgrades(),this.blackHole.state===D.STABLE&&x.darkMatter>=a&&(x.darkMatter-=a,this.spawnSerpent());for(let o=this.serpents.length-1;o>=0;o--){const l=this.serpents[o];if(!l){this.serpents.splice(o,1);continue}l.update(this),this.renderer.drawVoidSerpent(l),l.markedForDeletion&&this.serpents.splice(o,1)}this.blackHole.state!==D.EXPLODING&&Math.random()<M.POWERUP_RATE&&this.spawnPowerUp();const r=this.meteors.filter(o=>!o.isDebris).length;this.blackHole.state!==D.EXPLODING&&r<M.MAX_METEORS&&Math.random()<.05&&this.spawnMeteor();for(let o=this.meteors.length-1;o>=0;o--){const l=this.meteors[o];if(!l){this.meteors.splice(o,1);continue}l.update(this),this.renderer.drawMeteor(l,this.warpFactor),l.markedForDeletion&&this.meteors.splice(o,1)}for(this.bigMeteor===null?this.blackHole.state!==D.EXPLODING&&this.spawnBigMeteor():(this.bigMeteor.update(this),this.renderer.drawBigMeteor(this.bigMeteor,this.warpFactor),this.bigMeteor.markedForDeletion&&(this.bigMeteor=null,this.blackHole.state!==D.EXPLODING&&this.spawnBigMeteor()));this.ships.length<M.SHIP_COUNT;)this.spawnShip();for(let o=this.ships.length-1;o>=0;o--){const l=this.ships[o];if(!l){this.ships.splice(o,1);continue}l.update(this),this.renderer.drawShip(l),l.markedForDeletion&&this.ships.splice(o,1)}for(let o=this.projectiles.length-1;o>=0;o--){const l=this.projectiles[o];if(!l){this.projectiles.splice(o,1);continue}l.update(this),this.renderer.drawProjectile(l),l.markedForDeletion&&this.projectiles.splice(o,1)}for(let o=this.powerUps.length-1;o>=0;o--){const l=this.powerUps[o];if(!l){this.powerUps.splice(o,1);continue}l.update(this),this.renderer.drawPowerUp(l);for(const h of this.ships)if(q.checkCircleCollision(l,h,25,0)){if(l.type==="COIN"){x.coins+=500,this.createExplosion(l.x,l.y,20,"#fbbf24");const c=it.create(l.x,l.y,500);this.floatingTexts.push(c)}else h.applyPowerUp(l),this.createExplosion(l.x,l.y,15,l.color);l.markedForDeletion=!0;break}for(const h of this.serpents)if(h.segments.length>0){const c=h.segments[0];if(c&&q.checkCircleCollision(l,c,25,20)){if(l.type==="COIN"){x.darkMatter+=500,this.createExplosion(l.x,l.y,20,"#fbbf24");const f=it.create(l.x,l.y,500);f.text="+500‚ö´",f.color="#8b5cf6",this.floatingTexts.push(f)}else h.applyPowerUp(l),this.createExplosion(l.x,l.y,15,l.color);l.markedForDeletion=!0;break}}l.markedForDeletion&&this.powerUps.splice(o,1)}for(let o=this.shockwaves.length-1;o>=0;o--){const l=this.shockwaves[o];if(!l){this.shockwaves.splice(o,1);continue}l.update(this),l.draw(this.renderer.ctx),l.markedForDeletion&&this.shockwaves.splice(o,1)}for(let o=this.particles.length-1;o>=0;o--){const l=this.particles[o];if(!l){this.particles.splice(o,1);continue}l.update(),this.renderer.drawParticle(l),l.markedForDeletion&&this.particles.splice(o,1)}for(let o=this.floatingTexts.length-1;o>=0;o--){const l=this.floatingTexts[o];if(!l){this.floatingTexts.splice(o,1);continue}l.update(this),l.draw(this.renderer.ctx),l.markedForDeletion&&this.floatingTexts.splice(o,1)}}}const os={class:"fixed inset-0 bg-[#0a0a0a] overflow-hidden font-mono text-white select-none"},as={key:0,class:"absolute top-0 left-0 p-3 md:p-6 z-10 pointer-events-none"},ns={class:"flex items-center gap-4"},rs={class:"text-2xl md:text-4xl font-bold text-yellow-400 drop-shadow-md"},ls={class:"text-2xl md:text-4xl font-bold text-purple-400 drop-shadow-md"},cs=["title"],hs={key:0,class:"absolute top-[80px] md:top-[60px] right-0 p-2 md:p-6 flex flex-col items-end space-y-2 md:space-y-4 z-10 pointer-events-none shop-container"},ds={key:0,class:"flex flex-col space-y-1 md:space-y-2 pointer-events-auto max-h-[calc(100vh-120px)] md:max-h-none overflow-y-auto pr-1 md:pr-0"},us=["disabled"],fs={class:"flex justify-between items-center w-36 md:w-48"},ps={class:"text-yellow-400 text-[10px] md:text-xs"},gs={class:"text-[9px] md:text-[10px] text-gray-500 text-right"},xs=["disabled"],vs={class:"flex justify-between items-center w-36 md:w-48"},ys={class:"text-yellow-400 text-[10px] md:text-xs"},ms={class:"text-[9px] md:text-[10px] text-gray-500 text-right"},bs=["disabled"],ws={class:"flex justify-between items-center w-36 md:w-48"},Ms={class:"text-yellow-400 text-[10px] md:text-xs"},Ts={class:"text-[9px] md:text-[10px] text-gray-500 text-right"},Ss=["disabled"],Es={class:"flex justify-between items-center w-36 md:w-48"},Rs={class:"text-yellow-400 text-[10px] md:text-xs"},ks={class:"text-[9px] md:text-[10px] text-gray-500 text-right"},Ps=["disabled"],Ds={class:"flex justify-between items-center w-36 md:w-48"},_s={class:"text-yellow-400 text-[10px] md:text-xs"},Cs={class:"text-[9px] md:text-[10px] text-gray-500 text-right"},Is=["disabled"],As={class:"flex justify-between items-center w-36 md:w-48"},Os={class:"text-yellow-400 text-[10px] md:text-xs"},Ls={class:"text-[9px] md:text-[10px] text-gray-500 text-right"},Bs=["disabled"],Gs={class:"flex justify-between items-center w-36 md:w-48"},Hs={class:"text-yellow-400 text-[10px] md:text-xs"},Ns={class:"text-[9px] md:text-[10px] text-gray-500 text-right"},zs=["disabled"],$s={class:"flex justify-between items-center w-36 md:w-48"},Fs={class:"text-yellow-400 text-[10px] md:text-xs"},Us={class:"text-[9px] md:text-[10px] text-gray-500 text-right"},js=["disabled"],Ws={class:"flex justify-between items-center w-36 md:w-48"},Xs={class:"text-yellow-400 text-[10px] md:text-xs"},Vs={class:"text-[9px] md:text-[10px] text-gray-500 text-right"},Ys=["disabled"],qs={class:"flex justify-between items-center w-36 md:w-48"},Js={class:"text-yellow-400 text-[10px] md:text-xs"},Ks={class:"text-[9px] md:text-[10px] text-gray-500 text-right"},Zs=["disabled"],Qs={class:"flex justify-between items-center w-36 md:w-48"},ti={class:"text-yellow-400 text-[10px] md:text-xs"},ei={class:"text-[9px] md:text-[10px] text-gray-500 text-right"},si={key:0,class:"text-[9px] md:text-[10px] text-gray-600 pt-2 md:pt-4 text-right pointer-events-auto"},ii=It({__name:"index",props:{showUI:{type:Boolean,default:!0}},setup(n){const t=at(null),e=at(!0);let s=null,i;const a=j(()=>x.darkMatter),r=()=>{e.value=!e.value},o=b=>{b.stopPropagation()},l=()=>{s?.resize()},h=b=>{s&&(s.mouse.x=b.clientX,s.mouse.y=b.clientY)},c=()=>{s&&(s.mouse.down=!0)},f=()=>{s&&(s.mouse.down=!1)},p=b=>!b||!(b instanceof HTMLElement)?!1:b.closest("button, .shop-container, .pointer-events-auto")!==null,T=b=>{if(!p(b.target)&&(b.preventDefault(),s&&b.touches.length>0)){const u=b.touches[0];u&&(s.mouse.x=u.clientX,s.mouse.y=u.clientY,s.mouse.down=!0)}},y=b=>{if(!p(b.target)&&(b.preventDefault(),s&&b.touches.length>0)){const u=b.touches[0];u&&(s.mouse.x=u.clientX,s.mouse.y=u.clientY)}},E=b=>{p(b.target)||(b.preventDefault(),s&&(s.mouse.down=!1))},P=b=>{p(b.target)||(b.preventDefault(),s&&(s.mouse.down=!1))},k=()=>{s?.update(),i=requestAnimationFrame(k)};return Mt(()=>{t.value&&(s=new is(t.value),k(),window.addEventListener("resize",l),window.addEventListener("mousemove",h),window.addEventListener("mousedown",c),window.addEventListener("mouseup",f),window.addEventListener("touchstart",T,{passive:!1}),window.addEventListener("touchmove",y,{passive:!1}),window.addEventListener("touchend",E,{passive:!1}),window.addEventListener("touchcancel",P,{passive:!1}))}),jt(()=>{cancelAnimationFrame(i),window.removeEventListener("resize",l),window.removeEventListener("mousemove",h),window.removeEventListener("mousedown",c),window.removeEventListener("mouseup",f),window.removeEventListener("touchstart",T),window.removeEventListener("touchmove",y),window.removeEventListener("touchend",E),window.removeEventListener("touchcancel",P)}),(b,u)=>(L(),G("div",os,[g("canvas",{ref_key:"canvasRef",ref:t,class:"absolute inset-0 block touch-none",style:{"z-index":"0","pointer-events":"auto"}},null,512),H(ft,{name:"balance-fade"},{default:ut(()=>[n.showUI?lt("",!0):(L(),G("div",as,[g("div",ns,[g("div",rs,_(Math.floor(v(x).coins))+"$ ",1),g("div",ls,_(Math.floor(a.value))+"‚ö´ ",1)])]))]),_:1}),H(ft,{name:"shop-fade"},{default:ut(()=>[n.showUI?lt("",!0):(L(),G("button",{key:0,onClick:S(r,["stop"]),onTouchstart:S(o,["stop"]),onTouchend:S(r,["stop","prevent"]),class:"absolute top-[25px] md:top-[20px] right-[70px] md:right-[80px] z-20 w-8 h-8 md:w-10 md:h-10 flex items-center justify-center bg-white/10 hover:bg-white/20 active:bg-white/20 border border-white/20 rounded-lg transition-all duration-300 pointer-events-auto touch-manipulation group",title:e.value?"Collapse controls":"Expand controls"},[(L(),G("svg",{class:Rt(["w-4 h-4 md:w-5 md:h-5 text-white transition-transform duration-300",{"rotate-180":!e.value}]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[...u[22]||(u[22]=[g("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"},null,-1)])],2))],40,cs))]),_:1}),H(ft,{name:"shop-fade"},{default:ut(()=>[n.showUI?lt("",!0):(L(),G("div",hs,[H(ft,{name:"shop-expand"},{default:ut(()=>[e.value?(L(),G("div",ds,[g("button",{onClick:u[0]||(u[0]=S(m=>v(O)("ship"),["stop"])),onTouchstart:S(o,["stop"]),onTouchend:u[1]||(u[1]=S(m=>v(O)("ship"),["stop","prevent"])),class:"group relative px-2 md:px-4 py-1.5 md:py-2 bg-white/5 active:bg-white/10 hover:bg-white/10 border border-white/10 rounded-lg transition-all disabled:opacity-50 disabled:cursor-not-allowed touch-manipulation",disabled:v(x).coins<v(I).ship},[g("div",fs,[u[23]||(u[23]=g("span",{class:"text-xs md:text-sm text-gray-300 group-hover:text-white group-active:text-white"},"Add Ship",-1)),g("span",ps,_(v(I).ship)+"$",1)]),g("div",gs,"Count: "+_(v(x).shipsCount),1)],40,us),g("button",{onClick:u[2]||(u[2]=S(m=>v(O)("damage"),["stop"])),onTouchstart:S(o,["stop"]),onTouchend:u[3]||(u[3]=S(m=>v(O)("damage"),["stop","prevent"])),class:"group px-2 md:px-4 py-1.5 md:py-2 bg-white/5 active:bg-white/10 hover:bg-white/10 border border-white/10 rounded-lg transition-all disabled:opacity-50 touch-manipulation",disabled:v(x).coins<v(I).damage},[g("div",vs,[u[24]||(u[24]=g("span",{class:"text-xs md:text-sm text-gray-300 group-hover:text-white group-active:text-white"},"Damage",-1)),g("span",ys,_(v(I).damage)+"$",1)]),g("div",ms,"Lvl: "+_(v(x).damageLevel),1)],40,xs),g("button",{onClick:u[4]||(u[4]=S(m=>v(O)("hull"),["stop"])),onTouchstart:S(o,["stop"]),onTouchend:u[5]||(u[5]=S(m=>v(O)("hull"),["stop","prevent"])),class:"group px-2 md:px-4 py-1.5 md:py-2 bg-white/5 active:bg-white/10 hover:bg-white/10 border border-white/10 rounded-lg transition-all disabled:opacity-50 touch-manipulation",disabled:v(x).coins<v(I).hull},[g("div",ws,[u[25]||(u[25]=g("span",{class:"text-xs md:text-sm text-gray-300 group-hover:text-white group-active:text-white"},"Hull HP",-1)),g("span",Ms,_(v(I).hull)+"$",1)]),g("div",Ts,"Lvl: "+_(v(x).hullLevel),1)],40,bs),g("button",{onClick:u[6]||(u[6]=S(m=>v(O)("turret"),["stop"])),onTouchstart:S(o,["stop"]),onTouchend:u[7]||(u[7]=S(m=>v(O)("turret"),["stop","prevent"])),class:"group px-2 md:px-4 py-1.5 md:py-2 bg-white/5 active:bg-white/10 hover:bg-white/10 border border-white/10 rounded-lg transition-all disabled:opacity-50 touch-manipulation",disabled:v(x).coins<v(I).turret},[g("div",Es,[u[26]||(u[26]=g("span",{class:"text-xs md:text-sm text-gray-300 group-hover:text-white group-active:text-white"},"Fire Rate",-1)),g("span",Rs,_(v(I).turret)+"$",1)]),g("div",ks,"Lvl: "+_(v(x).turretSpeed),1)],40,Ss),u[34]||(u[34]=g("div",{class:"h-px bg-white/10 my-1 md:my-2"},null,-1)),g("button",{onClick:u[8]||(u[8]=S(m=>v(O)("shield"),["stop"])),onTouchstart:S(o,["stop"]),onTouchend:u[9]||(u[9]=S(m=>v(O)("shield"),["stop","prevent"])),class:"group px-2 md:px-4 py-1.5 md:py-2 bg-white/5 active:bg-white/10 hover:bg-white/10 border border-white/10 rounded-lg transition-all disabled:opacity-50 touch-manipulation",disabled:v(x).coins<v(I).shield},[g("div",Ds,[u[27]||(u[27]=g("span",{class:"text-xs md:text-sm text-blue-400 group-hover:text-blue-300 group-active:text-blue-300"},"Shield Gen",-1)),g("span",_s,_(v(I).shield)+"$",1)]),g("div",Cs,"Max: "+_(v(x).shieldLevel*5),1)],40,Ps),g("button",{onClick:u[10]||(u[10]=S(m=>v(O)("crit"),["stop"])),onTouchstart:S(o,["stop"]),onTouchend:u[11]||(u[11]=S(m=>v(O)("crit"),["stop","prevent"])),class:"group px-2 md:px-4 py-1.5 md:py-2 bg-white/5 active:bg-white/10 hover:bg-white/10 border border-white/10 rounded-lg transition-all disabled:opacity-50 touch-manipulation",disabled:v(x).coins<v(I).crit},[g("div",As,[u[28]||(u[28]=g("span",{class:"text-xs md:text-sm text-red-400 group-hover:text-red-300 group-active:text-red-300"},"Crit Chance",-1)),g("span",Os,_(v(I).crit)+"$",1)]),g("div",Ls,"Chance: "+_(v(x).critLevel*5)+"%",1)],40,Is),g("button",{onClick:u[12]||(u[12]=S(m=>v(O)("regen"),["stop"])),onTouchstart:S(o,["stop"]),onTouchend:u[13]||(u[13]=S(m=>v(O)("regen"),["stop","prevent"])),class:"group px-2 md:px-4 py-1.5 md:py-2 bg-white/5 active:bg-white/10 hover:bg-white/10 border border-white/10 rounded-lg transition-all disabled:opacity-50 touch-manipulation",disabled:v(x).coins<v(I).regen},[g("div",Gs,[u[29]||(u[29]=g("span",{class:"text-xs md:text-sm text-green-400 group-hover:text-green-300 group-active:text-green-300"},"Nanobots",-1)),g("span",Hs,_(v(I).regen)+"$",1)]),g("div",Ns,"Lvl: "+_(v(x).regenLevel),1)],40,Bs),g("button",{onClick:u[14]||(u[14]=S(m=>v(O)("magnet"),["stop"])),onTouchstart:S(o,["stop"]),onTouchend:u[15]||(u[15]=S(m=>v(O)("magnet"),["stop","prevent"])),class:"group px-2 md:px-4 py-1.5 md:py-2 bg-white/5 active:bg-white/10 hover:bg-white/10 border border-white/10 rounded-lg transition-all disabled:opacity-50 touch-manipulation",disabled:v(x).coins<v(I).magnet},[g("div",$s,[u[30]||(u[30]=g("span",{class:"text-xs md:text-sm text-purple-400 group-hover:text-purple-300 group-active:text-purple-300"},"Magnet",-1)),g("span",Fs,_(v(I).magnet)+"$",1)]),g("div",Us,"Range: "+_(500+(v(x).magnetLevel-1)*150),1)],40,zs),u[35]||(u[35]=g("div",{class:"h-px bg-white/10 my-1 md:my-2"},null,-1)),u[36]||(u[36]=g("div",{class:"text-[10px] md:text-xs text-red-400 font-semibold mb-1"},"Black Hole Debuffs",-1)),g("button",{onClick:u[16]||(u[16]=S(m=>v(O)("blackHoleSerpentCost"),["stop"])),onTouchstart:S(o,["stop"]),onTouchend:u[17]||(u[17]=S(m=>v(O)("blackHoleSerpentCost"),["stop","prevent"])),class:"group px-2 md:px-4 py-1.5 md:py-2 bg-red-500/10 active:bg-red-500/20 hover:bg-red-500/20 border border-red-500/20 rounded-lg transition-all disabled:opacity-50 touch-manipulation",disabled:v(x).coins<v(I).blackHoleSerpentCost},[g("div",Ws,[u[31]||(u[31]=g("span",{class:"text-xs md:text-sm text-red-300 group-hover:text-red-200 group-active:text-red-200"},"Increase Serpent Cost",-1)),g("span",Xs,_(v(I).blackHoleSerpentCost)+"$",1)]),g("div",Vs,"+"+_(v(x).blackHoleSerpentCostDebuff*50)+"$ base cost",1)],40,js),g("button",{onClick:u[18]||(u[18]=S(m=>v(O)("blackHoleBalanceRate"),["stop"])),onTouchstart:S(o,["stop"]),onTouchend:u[19]||(u[19]=S(m=>v(O)("blackHoleBalanceRate"),["stop","prevent"])),class:"group px-2 md:px-4 py-1.5 md:py-2 bg-red-500/10 active:bg-red-500/20 hover:bg-red-500/20 border border-red-500/20 rounded-lg transition-all disabled:opacity-50 touch-manipulation",disabled:v(x).coins<v(I).blackHoleBalanceRate},[g("div",qs,[u[32]||(u[32]=g("span",{class:"text-xs md:text-sm text-red-300 group-hover:text-red-200 group-active:text-red-200"},"Reduce Balance Rate",-1)),g("span",Js,_(v(I).blackHoleBalanceRate)+"$",1)]),g("div",Ks,"-"+_(v(x).blackHoleBalanceRateDebuff*10)+"$/sec",1)],40,Ys),g("button",{onClick:u[20]||(u[20]=S(m=>v(O)("blackHoleDarkMatterRate"),["stop"])),onTouchstart:S(o,["stop"]),onTouchend:u[21]||(u[21]=S(m=>v(O)("blackHoleDarkMatterRate"),["stop","prevent"])),class:"group px-2 md:px-4 py-1.5 md:py-2 bg-red-500/10 active:bg-red-500/20 hover:bg-red-500/20 border border-red-500/20 rounded-lg transition-all disabled:opacity-50 touch-manipulation",disabled:v(x).coins<v(I).blackHoleDarkMatterRate},[g("div",Qs,[u[33]||(u[33]=g("span",{class:"text-xs md:text-sm text-red-300 group-hover:text-red-200 group-active:text-red-200"},"Reduce Dark Matter Rate",-1)),g("span",ti,_(v(I).blackHoleDarkMatterRate)+"$",1)]),g("div",ei,"-"+_(v(x).blackHoleDarkMatterRateDebuff*5)+"‚ö´/sec",1)],40,Zs)])):lt("",!0)]),_:1}),H(ft,{name:"shop-expand"},{default:ut(()=>[e.value?(L(),G("div",si,[...u[37]||(u[37]=[g("span",{class:"hidden md:inline"},[J("Hold Click: Warp Drive"),g("br")],-1),g("span",{class:"md:hidden"},[J("Hold Touch: Warp"),g("br")],-1),J(" Killing Serpents gives $$$ ",-1)])])):lt("",!0)]),_:1})]))]),_:1})]))}}),oi=Object.assign(Wt(ii,[["__scopeId","data-v-aa0abd8b"]]),{__name:"Background"}),ai={trailing:!0};function ni(n,t=25,e={}){if(e={...ai,...e},!Number.isFinite(t))throw new TypeError("Expected `wait` to be a finite number");let s,i,a=[],r,o;const l=(f,p)=>(r=ri(n,f,p),r.finally(()=>{if(r=null,e.trailing&&o&&!i){const T=l(f,o);return o=null,T}}),r),h=function(...f){return e.trailing&&(o=f),r||new Promise(p=>{const T=!i&&e.leading;clearTimeout(i),i=setTimeout(()=>{i=null;const y=e.leading?s:l(this,f);o=null;for(const E of a)E(y);a=[]},t),T?(s=l(this,f),p(s)):a.push(p)})},c=f=>{f&&(clearTimeout(f),i=null)};return h.isPending=()=>!!i,h.cancel=()=>{c(i),a=[],o=null},h.flush=()=>{if(c(i),!o||r)return;const f=o;return o=null,l(this,f)},h}async function ri(n,t,e){return await n.apply(t,e)}function li(n){return typeof n=="string"?`'${n}'`:new ci().serialize(n)}const ci=(function(){class n{#t=new Map;compare(e,s){const i=typeof e,a=typeof s;return i==="string"&&a==="string"?e.localeCompare(s):i==="number"&&a==="number"?e-s:String.prototype.localeCompare.call(this.serialize(e,!0),this.serialize(s,!0))}serialize(e,s){if(e===null)return"null";switch(typeof e){case"string":return s?e:`'${e}'`;case"bigint":return`${e}n`;case"object":return this.$object(e);case"function":return this.$function(e)}return String(e)}serializeObject(e){const s=Object.prototype.toString.call(e);if(s!=="[object Object]")return this.serializeBuiltInType(s.length<10?`unknown:${s}`:s.slice(8,-1),e);const i=e.constructor,a=i===Object||i===void 0?"":i.name;if(a!==""&&globalThis[a]===i)return this.serializeBuiltInType(a,e);if(typeof e.toJSON=="function"){const r=e.toJSON();return a+(r!==null&&typeof r=="object"?this.$object(r):`(${this.serialize(r)})`)}return this.serializeObjectEntries(a,Object.entries(e))}serializeBuiltInType(e,s){const i=this["$"+e];if(i)return i.call(this,s);if(typeof s?.entries=="function")return this.serializeObjectEntries(e,s.entries());throw new Error(`Cannot serialize ${e}`)}serializeObjectEntries(e,s){const i=Array.from(s).sort((r,o)=>this.compare(r[0],o[0]));let a=`${e}{`;for(let r=0;r<i.length;r++){const[o,l]=i[r];a+=`${this.serialize(o,!0)}:${this.serialize(l)}`,r<i.length-1&&(a+=",")}return a+"}"}$object(e){let s=this.#t.get(e);return s===void 0&&(this.#t.set(e,`#${this.#t.size}`),s=this.serializeObject(e),this.#t.set(e,s)),s}$function(e){const s=Function.prototype.toString.call(e);return s.slice(-15)==="[native code] }"?`${e.name||""}()[native]`:`${e.name}(${e.length})${s.replace(/\s*\n\s*/g,"")}`}$Array(e){let s="[";for(let i=0;i<e.length;i++)s+=this.serialize(e[i]),i<e.length-1&&(s+=",");return s+"]"}$Date(e){try{return`Date(${e.toISOString()})`}catch{return"Date(null)"}}$ArrayBuffer(e){return`ArrayBuffer[${new Uint8Array(e).join(",")}]`}$Set(e){return`Set${this.$Array(Array.from(e).sort((s,i)=>this.compare(s,i)))}`}$Map(e){return this.serializeObjectEntries("Map",e.entries())}}for(const t of["Error","RegExp","URL"])n.prototype["$"+t]=function(e){return`${t}(${e})`};for(const t of["Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array"])n.prototype["$"+t]=function(e){return`${t}[${e.join(",")}]`};for(const t of["BigInt64Array","BigUint64Array"])n.prototype["$"+t]=function(e){return`${t}[${e.join("n,")}${e.length>0?"n":""}]`};return n})(),hi=[1779033703,-1150833019,1013904242,-1521486534,1359893119,-1694144372,528734635,1541459225],di=[1116352408,1899447441,-1245643825,-373957723,961987163,1508970993,-1841331548,-1424204075,-670586216,310598401,607225278,1426881987,1925078388,-2132889090,-1680079193,-1046744716,-459576895,-272742522,264347078,604807628,770255983,1249150122,1555081692,1996064986,-1740746414,-1473132947,-1341970488,-1084653625,-958395405,-710438585,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,-2117940946,-1838011259,-1564481375,-1474664885,-1035236496,-949202525,-778901479,-694614492,-200395387,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,-2067236844,-1933114872,-1866530822,-1538233109,-1090935817,-965641998],ui="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",st=[];class fi{_data=new ht;_hash=new ht([...hi]);_nDataBytes=0;_minBufferSize=0;finalize(t){t&&this._append(t);const e=this._nDataBytes*8,s=this._data.sigBytes*8;return this._data.words[s>>>5]|=128<<24-s%32,this._data.words[(s+64>>>9<<4)+14]=Math.floor(e/4294967296),this._data.words[(s+64>>>9<<4)+15]=e,this._data.sigBytes=this._data.words.length*4,this._process(),this._hash}_doProcessBlock(t,e){const s=this._hash.words;let i=s[0],a=s[1],r=s[2],o=s[3],l=s[4],h=s[5],c=s[6],f=s[7];for(let p=0;p<64;p++){if(p<16)st[p]=t[e+p]|0;else{const u=st[p-15],m=(u<<25|u>>>7)^(u<<14|u>>>18)^u>>>3,w=st[p-2],A=(w<<15|w>>>17)^(w<<13|w>>>19)^w>>>10;st[p]=m+st[p-7]+A+st[p-16]}const T=l&h^~l&c,y=i&a^i&r^a&r,E=(i<<30|i>>>2)^(i<<19|i>>>13)^(i<<10|i>>>22),P=(l<<26|l>>>6)^(l<<21|l>>>11)^(l<<7|l>>>25),k=f+P+T+di[p]+st[p],b=E+y;f=c,c=h,h=l,l=o+k|0,o=r,r=a,a=i,i=k+b|0}s[0]=s[0]+i|0,s[1]=s[1]+a|0,s[2]=s[2]+r|0,s[3]=s[3]+o|0,s[4]=s[4]+l|0,s[5]=s[5]+h|0,s[6]=s[6]+c|0,s[7]=s[7]+f|0}_append(t){typeof t=="string"&&(t=ht.fromUtf8(t)),this._data.concat(t),this._nDataBytes+=t.sigBytes}_process(t){let e,s=this._data.sigBytes/64;t?s=Math.ceil(s):s=Math.max((s|0)-this._minBufferSize,0);const i=s*16,a=Math.min(i*4,this._data.sigBytes);if(i){for(let r=0;r<i;r+=16)this._doProcessBlock(this._data.words,r);e=this._data.words.splice(0,i),this._data.sigBytes-=a}return new ht(e,a)}}class ht{words;sigBytes;constructor(t,e){t=this.words=t||[],this.sigBytes=e===void 0?t.length*4:e}static fromUtf8(t){const e=unescape(encodeURIComponent(t)),s=e.length,i=[];for(let a=0;a<s;a++)i[a>>>2]|=(e.charCodeAt(a)&255)<<24-a%4*8;return new ht(i,s)}toBase64(){const t=[];for(let e=0;e<this.sigBytes;e+=3){const s=this.words[e>>>2]>>>24-e%4*8&255,i=this.words[e+1>>>2]>>>24-(e+1)%4*8&255,a=this.words[e+2>>>2]>>>24-(e+2)%4*8&255,r=s<<16|i<<8|a;for(let o=0;o<4&&e*8+o*6<this.sigBytes*8;o++)t.push(ui.charAt(r>>>6*(3-o)&63))}return t.join("")}concat(t){if(this.words[this.sigBytes>>>2]&=4294967295<<32-this.sigBytes%4*8,this.words.length=Math.ceil(this.sigBytes/4),this.sigBytes%4)for(let e=0;e<t.sigBytes;e++){const s=t.words[e>>>2]>>>24-e%4*8&255;this.words[this.sigBytes+e>>>2]|=s<<24-(this.sigBytes+e)%4*8}else for(let e=0;e<t.sigBytes;e+=4)this.words[this.sigBytes+e>>>2]=t.words[e>>>2];this.sigBytes+=t.sigBytes}}function pi(n){return new fi().finalize(n).toBase64()}function ct(n){return pi(li(n))}const gi=Symbol.for("nuxt:client-only");function xi(...n){const t=typeof n[n.length-1]=="string"?n.pop():void 0;vi(n[0],n[1])&&n.unshift(t);let[e,s,i={}]=n,a=!1;const r=j(()=>N(e));if(typeof r.value!="string")throw new TypeError("[nuxt] [useAsyncData] key must be a string.");if(typeof s!="function")throw new TypeError("[nuxt] [useAsyncData] handler must be a function.");const o=oe();i.server??=!0,i.default??=mi,i.getCachedData??=te,i.lazy??=!1,i.immediate??=!0,i.deep??=ae.deep,i.dedupe??="cancel",i._functionName,o._asyncData[r.value];function l(){const y={cause:"initial",dedupe:i.dedupe};return o._asyncData[r.value]?._init||(y.cachedData=i.getCachedData(r.value,o,{cause:"initial"}),o._asyncData[r.value]=Ft(o,r.value,s,i,y.cachedData)),()=>o._asyncData[r.value].execute(y)}const h=l(),c=o._asyncData[r.value];c._deps++;const f=i.server!==!1&&o.payload.serverRendered;{let y=function(m){const w=o._asyncData[m];w?._deps&&(w._deps--,w._deps===0&&w?._off())};const E=At();if(E&&f&&i.immediate&&!E.sp&&(E.sp=[]),E&&!E._nuxtOnBeforeMountCbs){E._nuxtOnBeforeMountCbs=[];const m=E._nuxtOnBeforeMountCbs;ne(()=>{m.forEach(w=>{w()}),m.splice(0,m.length)}),jt(()=>m.splice(0,m.length))}const P=E&&(E._nuxtClientOnly||re(gi,!1));f&&o.isHydrating&&(c.error.value||c.data.value!==void 0)?c.status.value=c.error.value?"error":"success":E&&(!P&&o.payload.serverRendered&&o.isHydrating||i.lazy)&&i.immediate?E._nuxtOnBeforeMountCbs.push(h):i.immediate&&c.status.value!=="success"&&h();const k=Vt(),b=dt(r,(m,w)=>{if((m||w)&&m!==w){a=!0;const A=o._asyncData[w]?.data.value!==void 0,R=o._asyncDataPromises[w]!==void 0,B={cause:"initial",dedupe:i.dedupe};if(!o._asyncData[m]?._init){let F;w&&A?F=o._asyncData[w].data.value:(F=i.getCachedData(m,o,{cause:"initial"}),B.cachedData=F),o._asyncData[m]=Ft(o,m,s,i,F)}o._asyncData[m]._deps++,w&&y(w),(i.immediate||A||R)&&o._asyncData[m].execute(B),he(()=>{a=!1})}},{flush:"sync"}),u=i.watch?dt(i.watch,()=>{a||c._execute({cause:"watch",dedupe:i.dedupe})}):()=>{};k&&Xt(()=>{b(),u(),y(r.value)})}const p={data:vt(()=>o._asyncData[r.value]?.data),pending:vt(()=>o._asyncData[r.value]?.pending),status:vt(()=>o._asyncData[r.value]?.status),error:vt(()=>o._asyncData[r.value]?.error),refresh:(...y)=>o._asyncData[r.value]?._init?o._asyncData[r.value].execute(...y):l()(),execute:(...y)=>p.refresh(...y),clear:()=>{const y=o._asyncData[r.value];if(y?._abortController)try{y._abortController.abort(new DOMException("AsyncData aborted by user.","AbortError"))}finally{y._abortController=void 0}Qt(o,r.value)}},T=Promise.resolve(o._asyncDataPromises[r.value]).then(()=>p);return Object.assign(T,p),T}function vt(n){return j({get(){return n()?.value},set(t){const e=n();e&&(e.value=t)}})}function vi(n,t){return!(typeof n=="string"||typeof n=="object"&&n!==null||typeof n=="function"&&typeof t=="function")}function Qt(n,t){t in n.payload.data&&(n.payload.data[t]=void 0),t in n.payload._errors&&(n.payload._errors[t]=void 0),n._asyncData[t]&&(n._asyncData[t].data.value=v(n._asyncData[t]._default()),n._asyncData[t].error.value=void 0,n._asyncData[t].status.value="idle"),t in n._asyncDataPromises&&(n._asyncDataPromises[t]=void 0)}function yi(n,t){const e={};for(const s of t)e[s]=n[s];return e}function Ft(n,t,e,s,i){n.payload._errors[t]??=void 0;const a=s.getCachedData!==te,r=e,o=s.deep?at:z,l=i!==void 0,h=n.hook("app:data:refresh",async f=>{(!f||f.includes(t))&&await c.execute({cause:"refresh:hook"})}),c={data:o(l?i:s.default()),pending:j(()=>c.status.value==="pending"),error:le(n.payload._errors,t),status:z("idle"),execute:(...f)=>{const[p,T=void 0]=f,y=p&&T===void 0&&typeof p=="object"?p:{};if(n._asyncDataPromises[t]&&(y.dedupe??s.dedupe)==="defer")return n._asyncDataPromises[t];{const k="cachedData"in y?y.cachedData:s.getCachedData(t,n,{cause:y.cause??"refresh:manual"});if(k!==void 0)return n.payload.data[t]=c.data.value=k,c.error.value=void 0,c.status.value="success",Promise.resolve(k)}c._abortController&&c._abortController.abort(new DOMException("AsyncData request cancelled by deduplication","AbortError")),c._abortController=new AbortController,c.status.value="pending";const E=new AbortController,P=new Promise((k,b)=>{try{const u=y.timeout??s.timeout,m=bi([c._abortController?.signal,y?.signal],E.signal,u);if(m.aborted){const w=m.reason;b(w instanceof Error?w:new DOMException(String(w??"Aborted"),"AbortError"));return}return m.addEventListener("abort",()=>{const w=m.reason;b(w instanceof Error?w:new DOMException(String(w??"Aborted"),"AbortError"))},{once:!0,signal:E.signal}),Promise.resolve(r(n,{signal:m})).then(k,b)}catch(u){b(u)}}).then(async k=>{let b=k;s.transform&&(b=await s.transform(k)),s.pick&&(b=yi(b,s.pick)),n.payload.data[t]=b,c.data.value=b,c.error.value=void 0,c.status.value="success"}).catch(k=>{if(!(n._asyncDataPromises[t]&&n._asyncDataPromises[t]!==P)&&!c._abortController?.signal.aborted){if(typeof DOMException<"u"&&k instanceof DOMException&&k.name==="AbortError"){c.status.value="idle";return}c.error.value=ce(k),c.data.value=v(s.default()),c.status.value="error"}}).finally(()=>{E.abort(),delete n._asyncDataPromises[t]});return n._asyncDataPromises[t]=P,n._asyncDataPromises[t]},_execute:ni((...f)=>c.execute(...f),0,{leading:!0}),_default:s.default,_deps:0,_init:!0,_hash:void 0,_off:()=>{h(),n._asyncData[t]?._init&&(n._asyncData[t]._init=!1),a||Yt(()=>{n._asyncData[t]?._init||(Qt(n,t),c.execute=()=>Promise.resolve())})}};return c}const mi=()=>{},te=(n,t,e)=>{if(t.isHydrating)return t.payload.data[n];if(e.cause!=="refresh:manual"&&e.cause!=="refresh:hook")return t.static.data[n]};function bi(n,t,e){const s=n.filter(r=>!!r);if(typeof e=="number"&&e>=0){const r=AbortSignal.timeout?.(e);r&&s.push(r)}if(AbortSignal.any)return AbortSignal.any(s);const i=new AbortController;for(const r of s)if(r.aborted){const o=r.reason??new DOMException("Aborted","AbortError");try{i.abort(o)}catch{i.abort()}return i.signal}const a=()=>{const o=s.find(l=>l.aborted)?.reason??new DOMException("Aborted","AbortError");try{i.abort(o)}catch{i.abort()}};for(const r of s)r.addEventListener?.("abort",a,{once:!0,signal:t});return i.signal}function Gt(n,t){return Vt()?(Xt(n,t),!0):!1}const wi=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const Mi=n=>n!=null,Ti=Object.prototype.toString,Si=n=>Ti.call(n)==="[object Object]";function bt(n){return Array.isArray(n)?n:[n]}function Ei(n){return At()}function Ri(n,t=!0,e){Ei()?Mt(n,e):t?n():Yt(n)}function ki(n,t,e){return dt(n,t,{...e,immediate:!0})}const xt=wi?window:void 0;function gt(n){var t;const e=N(n);return(t=e?.$el)!==null&&t!==void 0?t:e}function ot(...n){const t=[],e=()=>{t.forEach(o=>o()),t.length=0},s=(o,l,h,c)=>(o.addEventListener(l,h,c),()=>o.removeEventListener(l,h,c)),i=j(()=>{const o=bt(N(n[0])).filter(l=>l!=null);return o.every(l=>typeof l!="string")?o:void 0}),a=ki(()=>{var o,l;return[(o=(l=i.value)===null||l===void 0?void 0:l.map(h=>gt(h)))!==null&&o!==void 0?o:[xt].filter(h=>h!=null),bt(N(i.value?n[1]:n[0])),bt(v(i.value?n[2]:n[1])),N(i.value?n[3]:n[2])]},([o,l,h,c])=>{if(e(),!o?.length||!l?.length||!h?.length)return;const f=Si(c)?{...c}:c;t.push(...o.flatMap(p=>l.flatMap(T=>h.map(y=>s(p,T,y,f)))))},{flush:"post"}),r=()=>{a(),e()};return Gt(e),r}function Pi(){const n=z(!1),t=At();return t&&Mt(()=>{n.value=!0},t),n}function ee(n){const t=Pi();return j(()=>(t.value,!!n()))}function Di(n,t,e={}){const{window:s=xt,...i}=e;let a;const r=ee(()=>s&&"MutationObserver"in s),o=()=>{a&&(a.disconnect(),a=void 0)},l=dt(j(()=>{const f=bt(N(n)).map(gt).filter(Mi);return new Set(f)}),f=>{o(),r.value&&f.size&&(a=new MutationObserver(t),f.forEach(p=>a.observe(p,i)))},{immediate:!0,flush:"post"}),h=()=>a?.takeRecords(),c=()=>{l(),o()};return Gt(c),{isSupported:r,stop:c,takeRecords:h}}function _i(n,t,e={}){const{window:s=xt,...i}=e;let a;const r=ee(()=>s&&"ResizeObserver"in s),o=()=>{a&&(a.disconnect(),a=void 0)},l=dt(j(()=>{const c=N(n);return Array.isArray(c)?c.map(f=>gt(f)):[gt(c)]}),c=>{if(o(),r.value&&s){a=new ResizeObserver(t);for(const f of c)f&&a.observe(f,i)}},{immediate:!0,flush:"post"}),h=()=>{o(),l()};return Gt(h),{isSupported:r,stop:h}}const Ci={page:n=>[n.pageX,n.pageY],client:n=>[n.clientX,n.clientY],screen:n=>[n.screenX,n.screenY],movement:n=>n instanceof MouseEvent?[n.movementX,n.movementY]:null};function Ii(n={}){const{type:t="page",touch:e=!0,resetOnTouchEnds:s=!1,initialValue:i={x:0,y:0},window:a=xt,target:r=a,scroll:o=!0,eventFilter:l}=n;let h=null,c=0,f=0;const p=z(i.x),T=z(i.y),y=z(null),E=typeof t=="function"?t:Ci[t],P=R=>{const B=E(R);h=R,B&&([p.value,T.value]=B,y.value="mouse"),a&&(c=a.scrollX,f=a.scrollY)},k=R=>{if(R.touches.length>0){const B=E(R.touches[0]);B&&([p.value,T.value]=B,y.value="touch")}},b=()=>{if(!h||!a)return;const R=E(h);h instanceof MouseEvent&&R&&(p.value=R[0]+a.scrollX-c,T.value=R[1]+a.scrollY-f)},u=()=>{p.value=i.x,T.value=i.y},m=l?R=>l(()=>P(R),{}):R=>P(R),w=l?R=>l(()=>k(R),{}):R=>k(R),A=l?()=>l(()=>b(),{}):()=>b();if(r){const R={passive:!0};ot(r,["mousemove","dragover"],m,R),e&&t!=="movement"&&(ot(r,["touchstart","touchmove"],w,R),s&&ot(r,"touchend",u,R)),o&&t==="page"&&ot(a,"scroll",A,R)}return{x:p,y:T,sourceType:y}}function Ai(n,t={}){const{windowResize:e=!0,windowScroll:s=!0,handleOutside:i=!0,window:a=xt}=t,r=t.type||"page",{x:o,y:l,sourceType:h}=Ii(t),c=z(n??a?.document.body),f=z(0),p=z(0),T=z(0),y=z(0),E=z(0),P=z(0),k=z(!0);function b(){if(!a)return;const w=gt(c);if(!w||!(w instanceof Element))return;const{left:A,top:R,width:B,height:F}=w.getBoundingClientRect();T.value=A+(r==="page"?a.pageXOffset:0),y.value=R+(r==="page"?a.pageYOffset:0),E.value=F,P.value=B;const et=o.value-T.value,St=l.value-y.value;k.value=B===0||F===0||et<0||St<0||et>B||St>F,(i||!k.value)&&(f.value=et,p.value=St)}const u=[];function m(){u.forEach(w=>w()),u.length=0}if(Ri(()=>{b()}),a){const{stop:w}=_i(c,b),{stop:A}=Di(c,b,{attributeFilter:["style","class"]}),R=dt([c,o,l],b);u.push(w,A,R),ot(document,"mouseleave",()=>k.value=!0,{passive:!0}),s&&u.push(ot("scroll",b,{capture:!0,passive:!0})),e&&u.push(ot("resize",b,{passive:!0}))}return{x:o,y:l,sourceType:h,elementX:f,elementY:p,elementPositionX:T,elementPositionY:y,elementHeight:E,elementWidth:P,isOutside:k,stop:m}}const Oi=["href"],Li={class:"relative z-10"},Bi={class:"flex justify-between items-start mb-4"},Gi={class:"p-2 bg-white/5 rounded-lg group-hover:bg-primary/20 transition-colors duration-300"},Hi={class:"flex items-center space-x-1 text-gray-400 bg-black/20 px-2 py-1 rounded-full"},Ni={class:"text-xs font-mono font-bold"},zi={class:"text-lg font-bold text-white mb-2 group-hover:text-primary transition-colors"},$i={class:"text-gray-400 text-sm leading-relaxed mb-4 line-clamp-3 h-[4.5em]"},Fi={class:"flex flex-wrap gap-2 mb-4 h-6 overflow-hidden"},Ui={class:"relative z-10 flex items-center justify-between mt-auto border-t border-white/5 pt-4"},ji={class:"flex items-center gap-2"},Wi=It({__name:"ProjectCard",props:{project:{},index:{}},setup(n){const t=at(null),{elementX:e,elementY:s,isOutside:i,elementHeight:a,elementWidth:r}=Ai(t),o=j(()=>{if(i.value)return"";const c=6,f=(c/2-s.value/a.value*c).toFixed(2),p=(e.value/r.value*c-c/2).toFixed(2);return`perspective(1000px) rotateX(${f}deg) rotateY(${p}deg) scale(1.02)`}),l={TypeScript:"text-blue-400",Vue:"text-green-400",Python:"text-yellow-400",PHP:"text-purple-400",JavaScript:"text-yellow-300",Go:"text-cyan-400",HTML:"text-orange-400",CSS:"text-blue-300"},h=c=>{c.stopPropagation()};return(c,f)=>{const p=qt;return L(),G("a",{href:n.project.url,target:"_blank",ref_key:"target",ref:t,onTouchstart:S(h,["stop"]),onTouchend:S(h,["stop"]),onClick:S(h,["stop"]),style:de({transform:o.value,transition:v(i)?"transform 0.5s ease":"none",animationDelay:`${n.index*50}ms`}),class:"project-card group relative flex flex-col justify-between p-6 bg-surface/40 backdrop-blur-sm border border-white/5 rounded-2xl hover:border-primary/50 active:border-primary/50 hover:shadow-2xl hover:shadow-primary/10 hover:bg-surface/60 active:bg-surface/60 animate-slide-up opacity-0 touch-manipulation"},[f[0]||(f[0]=g("div",{class:"absolute inset-0 rounded-2xl opacity-0 group-hover:opacity-100 transition-opacity duration-500 pointer-events-none bg-gradient-to-br from-white/5 to-transparent"},null,-1)),g("div",Li,[g("div",Bi,[g("div",Gi,[H(p,{name:"lucide:folder-git-2",class:"w-6 h-6 text-gray-300 group-hover:text-primary"})]),g("div",Hi,[H(p,{name:"lucide:star",class:"w-3.5 h-3.5"}),g("span",Ni,_(n.project.stars),1)])]),g("h3",zi,_(n.project.name),1),g("p",$i,_(n.project.description||"No description provided"),1),g("div",Fi,[(L(!0),G(yt,null,mt(n.project.topics.slice(0,3),T=>(L(),G("span",{key:T,class:"text-[10px] px-2 py-0.5 rounded-full bg-white/5 text-gray-400"},_(T),1))),128))])]),g("div",Ui,[g("div",ji,[g("span",{class:Rt(["w-2 h-2 rounded-full",n.project.language==="Vue"?"bg-green-500":n.project.language==="TypeScript"?"bg-blue-500":"bg-gray-500"])},null,2),g("span",{class:Rt(["text-xs font-mono",l[n.project.language]||"text-gray-400"])},_(n.project.language||"Code"),3)]),H(p,{name:"lucide:arrow-up-right",class:"w-4 h-4 text-gray-500 group-hover:text-primary group-hover:translate-x-0.5 group-hover:-translate-y-0.5 transition-all"})])],44,Oi)}}}),Xi=Object.assign(Wt(Wi,[["__scopeId","data-v-549cd2e3"]]),{__name:"ProjectCard"});function Vi(n,t,e){const[s={},i]=typeof t=="string"?[{},t]:[t,e],a=j(()=>N(n)),r=j(()=>N(s.key)||"$f"+ct([i,typeof a.value=="string"?a.value:"",...Yi(s)]));if(!s.baseURL&&typeof a.value=="string"&&a.value[0]==="/"&&a.value[1]==="/")throw new Error('[nuxt] [useFetch] the request URL must not start with "//".');const{server:o,lazy:l,default:h,transform:c,pick:f,watch:p,immediate:T,getCachedData:y,deep:E,dedupe:P,timeout:k,...b}=s,u=Ct({...ue,...b,cache:typeof s.cache=="boolean"?void 0:s.cache}),m={server:o,lazy:l,default:h,transform:c,pick:f,immediate:T,getCachedData:y,deep:E,dedupe:P,timeout:k,watch:p===!1?[]:[...p||[],u]};return xi(p===!1?r.value:r,(A,{signal:R})=>(s.$fetch||globalThis.$fetch)(a.value,{signal:R,...u}),m)}function Yi(n){const t=[N(n.method)?.toUpperCase()||"GET",N(n.baseURL)];for(const e of[n.query||n.params]){const s=N(e);if(!s)continue;const i={};for(const[a,r]of Object.entries(s))i[N(a)]=N(r);t.push(i)}if(n.body){const e=N(n.body);if(!e)t.push(ct(e));else if(e instanceof ArrayBuffer)t.push(ct(Object.fromEntries([...new Uint8Array(e).entries()].map(([s,i])=>[s,i.toString()]))));else if(e instanceof FormData){const s={};for(const i of e.entries()){const[a,r]=i;s[a]=r instanceof File?r.name:r}t.push(ct(s))}else if(fe(e))t.push(ct(Ct(e)));else try{t.push(ct(e))}catch{console.warn("[useFetch] Failed to hash body",e)}}return t}const qi=globalThis.setInterval,Ji={class:"min-h-screen text-white relative selection:bg-primary selection:text-white overflow-x-hidden"},Ki=["title"],Zi={class:"relative z-10"},Qi={class:"container mx-auto px-6 py-24 max-w-7xl"},to={class:"mb-32 max-w-3xl"},eo={class:"text-2xl md:text-3xl text-gray-400 mb-10 font-light h-20 md:h-auto"},so={class:"text-white"},io={key:0,class:"animate-blink"},oo={class:"flex flex-wrap gap-4 animate-fade-in-up",style:{"animation-delay":"300ms"}},ao=["href"],no={class:"font-medium"},ro={class:"flex items-end justify-between mb-12 border-b border-white/10 pb-4"},lo={class:"text-3xl font-bold flex items-center gap-3 mb-2"},co={key:0,class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},ho={key:1,class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 perspective-grid"},uo={class:"mt-12 text-center md:hidden"},fo={class:"mt-40 pt-8 border-t border-white/10 flex flex-col md:flex-row justify-between items-center text-gray-500 text-sm"},po={class:"mt-2 md:mt-0 flex items-center gap-2"},Ut="Backend & Frontend Developer building useful things.",bo=It({__name:"index",async setup(n){let t,e;const{data:s,pending:i}=([t,e]=pe(()=>Vi("/api/projects.json",{default:()=>[]},"$77hSeXQoip")),t=await t,e(),t),a=[{name:"GitHub",url:"https://github.com/s00d",icon:"lucide:github"},{name:"LinkedIn",url:"https://www.linkedin.com/in/s00d/",icon:"lucide:linkedin"},{name:"Telegram",url:"tg://resolve?domain=is_s00d",icon:"lucide:send"},{name:"Email",url:"mailto:Virus191288@gmail.com",icon:"lucide:mail"}],r=at(""),o=at(!0),l=at(!0),h=()=>{l.value=!l.value},c=f=>{f.stopPropagation()};return Mt(()=>{let f=0;const p=qi(()=>{f<Ut.length?(r.value+=Ut.charAt(f),f++):(clearInterval(p),o.value=!1)},50)}),(f,p)=>{const T=oi,y=qt,E=Xi;return L(),G("div",Ji,[H(T,{showUI:l.value},null,8,["showUI"]),g("button",{onClick:S(h,["stop"]),onTouchstart:S(c,["stop"]),onTouchend:S(h,["stop","prevent"]),class:"fixed top-4 right-4 z-50 w-12 h-12 flex items-center justify-center bg-white/10 backdrop-blur-md rounded-full border border-white/20 hover:bg-white/20 active:bg-white/20 transition-all duration-300 hover:scale-110 group touch-manipulation",title:l.value?"–°–∫—Ä—ã—Ç—å –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å":"–ü–æ–∫–∞–∑–∞—Ç—å –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å"},[H(y,{name:l.value?"lucide:eye-off":"lucide:eye",class:"w-5 h-5 text-white group-hover:text-primary transition-colors"},null,8,["name"])],40,Ki),ge(g("div",Zi,[g("main",Qi,[g("header",to,[p[0]||(p[0]=g("div",{class:"animate-fade-in-down"},[g("span",{class:"inline-block px-3 py-1 mb-6 text-xs font-mono font-medium tracking-wider text-primary bg-primary/10 rounded-full border border-primary/20"}," HELLO, WORLD "),g("h1",{class:"text-6xl md:text-8xl font-bold mb-8 tracking-tight leading-tight"},[J(" Pavel "),g("span",{class:"text-transparent bg-clip-text bg-gradient-to-r from-white via-gray-200 to-gray-500"}," Kuz'min ")])],-1)),g("h2",eo,[g("span",so,_(r.value),1),o.value?(L(),G("span",io,"|")):lt("",!0)]),g("div",oo,[(L(),G(yt,null,mt(a,P=>g("a",{key:P.name,href:P.url,target:"_blank",onTouchstart:S(c,["stop"]),onTouchend:S(c,["stop"]),class:"group flex items-center space-x-2 px-5 py-3 bg-surface/50 backdrop-blur-md rounded-full hover:bg-white/10 active:bg-white/10 border border-white/10 hover:border-primary/50 transition-all duration-300 hover:scale-105 touch-manipulation"},[H(y,{name:P.icon,class:"w-5 h-5 text-gray-300 group-hover:text-primary transition-colors"},null,8,["name"]),g("span",no,_(P.name),1)],40,ao)),64))])]),g("section",null,[g("div",ro,[g("div",null,[g("h2",lo,[H(y,{name:"lucide:code-2",class:"text-primary"}),p[1]||(p[1]=J(" Selected Projects ",-1))]),p[2]||(p[2]=g("p",{class:"text-gray-400 text-sm"},"Open source contributions and personal labs",-1))]),g("a",{href:"https://github.com/s00d?tab=repositories",target:"_blank",onTouchstart:S(c,["stop"]),onTouchend:S(c,["stop"]),class:"hidden md:flex items-center gap-2 text-sm text-gray-400 hover:text-white active:text-white transition-colors group touch-manipulation"},[p[3]||(p[3]=J(" View all on GitHub ",-1)),H(y,{name:"lucide:arrow-right",class:"w-4 h-4 group-hover:translate-x-1 transition-transform"})],32)]),v(i)?(L(),G("div",co,[(L(),G(yt,null,mt(6,P=>g("div",{key:P,class:"h-64 bg-white/5 rounded-2xl animate-pulse border border-white/5"})),64))])):(L(),G("div",ho,[(L(!0),G(yt,null,mt(v(s),(P,k)=>(L(),ve(E,{key:P.id,project:P,index:k},null,8,["project","index"]))),128))])),g("div",uo,[g("a",{href:"https://github.com/s00d?tab=repositories",target:"_blank",onTouchstart:S(c,["stop"]),onTouchend:S(c,["stop"]),class:"inline-flex items-center gap-2 text-sm text-gray-400 hover:text-white active:text-white transition-colors border border-white/10 px-6 py-3 rounded-full touch-manipulation"},[p[4]||(p[4]=J(" View all on GitHub ",-1)),H(y,{name:"lucide:arrow-right",class:"w-4 h-4"})],32)])]),g("footer",fo,[g("p",null,"¬© "+_(new Date().getFullYear())+" Pavel Kuz'min.",1),g("p",po,[p[5]||(p[5]=J(" Built with ",-1)),H(y,{name:"logos:nuxt-icon",class:"w-4 h-4 grayscale opacity-50"}),p[6]||(p[6]=J(" Nuxt 3 & Tailwind ",-1))])])])],512),[[xe,l.value]])])}}});export{bo as default};
